<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en">
<title type="text">davidstamen.com</title>
<generator uri="https://github.com/jekyll/jekyll">Jekyll</generator>
<link rel="self" type="application/atom+xml" href="/feed.xml" />
<link rel="alternate" type="text/html" href="" />
<updated>2017-07-28T14:04:02-04:00</updated>
<id>/</id>
<author>
  <name>David Stamen</name>
  <uri>/</uri>
  <email>dstamen@gmail.com</email>
</author>


<entry>
  <title type="html"><![CDATA[Using PowerCLI to Add vRealize Operations License Key]]></title>
  <link rel="alternate" type="text/html" href="/vrealize%20operations/using-powercli-to-add-vrealize-operations-license-key/" />
  <id>/vrealize%20operations/using-powercli-to-add-vrealize-operations-license-key</id>
  <published>2017-07-27T00:00:00-04:00</published>
  <updated>2017-07-27T00:00:00-04:00</updated>
  <author>
    <name>David Stamen</name>
    <uri></uri>
    <email>dstamen@gmail.com</email>
  </author>
  <content type="html">
    &lt;p&gt;I have been working on doing a vCenter Consolidation Project. This included migrating our systems to a new vRealize Operations Server. This particular one included 73 different vSOM keys, and as you may know there is currently no way to enter in multiple keys at a time. I reached out to Kyle Ruddy and he informed me there is an API to do this, and that started my adventure to get this working.&lt;/p&gt;

&lt;h4 id=&quot;pre-requsites&quot;&gt;&lt;strong&gt;&lt;em&gt;Pre-Requsites&lt;/em&gt;&lt;/strong&gt;&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.vmware.com/support/developer/PowerCLI/&quot;&gt;VMware PowerCLI&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;preparing-to-execute-the-script&quot;&gt;&lt;strong&gt;&lt;em&gt;Preparing to Execute the Script&lt;/em&gt;&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;The script is pretty straight forward, you can either export the license keys from an old vRealize Operations Server (6.6+) or create a CSV with column (LicenseKey) to be imported.&lt;/p&gt;

&lt;p&gt;If you are choosing to export keys from an existing server, it has to be on a version that currently has API support. (I used v6.6)&lt;/p&gt;

&lt;p&gt;You can run the following script to export all keys to a csv file.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$Cred = Get-Credential
$vrom = &quot;vromold.lab.local&quot;

Connect-OMServer -Server $vrom -Credential $Cred

$omServer = $global:DefaultOMServers[0].ExtensionData
$omLicense = $OmServer.GetLicenseKeysForProduct()
$omLicense.Solutionlicense|Export-Csv C:\temp\omkeys2.csv -NoTypeInformation
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;If you exported the keys above, you should be immediately ready to import the keys to your new vRealize Operations Server, if not you can manually create the csv as listed above.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$Cred = Get-Credential
$vrom = &quot;vromnew.lab.local&quot;

Connect-OMServer -Server $vrom -Credential $Cred

$keys = import-csv c:\temp\omkeys.csv
foreach ($key in $keys) {
    $solutionLicense = New-Object VMware.VimAutomation.VROps.Views.SolutionLicense
    $solutionLicense.LicenseKey = $key.LicenseKey
    $solutionLicenses = New-Object VMware.VimAutomation.VROps.Views.SolutionLicenses
    $solutionLicenses.Solutionlicense = $solutionLicense
    $omserver.AddLicenseKeyToProduct($solutionLicenses)
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;The documentation was pretty spotty on this as it stated you only needed to pass the key to AddLicenseKeyToProduct(), but after multiple tests I realized that was not true. I eventually found out i have to create SolutionLicense objects and link them till i got the proper format. This was quite fun as i learned alot about PowerShell and API documentation in this process.&lt;/p&gt;

&lt;p&gt;You can find API documentation for vRealize Operations at https://fqdn/suite-api/docs/rest/index.html&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/vrom1.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Hope this helps you out, leave any feedback or questions below.&lt;/p&gt;

    &lt;p&gt;&lt;a href=&quot;/vrealize%20operations/using-powercli-to-add-vrealize-operations-license-key/&quot;&gt;Using PowerCLI to Add vRealize Operations License Key&lt;/a&gt; was originally published by David Stamen at &lt;a href=&quot;&quot;&gt;davidstamen.com&lt;/a&gt; on July 27, 2017.&lt;/p&gt;
  </content>
</entry>


<entry>
  <title type="html"><![CDATA[Configuring Unifi Controller and USG for L2TP VPN]]></title>
  <link rel="alternate" type="text/html" href="/ubiquiti/configuring-unifi-controller-and-usg-for-l2tp-vpn/" />
  <id>/ubiquiti/configuring-unifi-controller-and-usg-for-l2tp-vpn</id>
  <published>2017-04-25T00:00:00-04:00</published>
  <updated>2017-04-25T00:00:00-04:00</updated>
  <author>
    <name>David Stamen</name>
    <uri></uri>
    <email>dstamen@gmail.com</email>
  </author>
  <content type="html">
    &lt;p&gt;I have been waiting for native GUI support for L2TP vpn with local users and it is finally here! Ubiquiti Unifi Equipment now supports local radius auth using the 5.5.x code of controller! Please see below on how you can get this setup. For my example i will be using the Stable Candidate 5.5.11.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://community.ubnt.com/t5/UniFi-Updates-Blog/UniFi-5-5-11-Stable-Candidate-has-been-released/ba-p/1905832&quot;&gt;Unifi Controller 5.5.11&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Configuration is quite simple! Just follow these few easy steps and you will be up in no time.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;The first step is to create your radius profile. to do this browse to &lt;em&gt;Settings&lt;/em&gt; and then &lt;em&gt;Profiles&lt;/em&gt;.&lt;/li&gt;
  &lt;li&gt;Here you will create a name for your radius profile, the only thing you will change here is the &lt;em&gt;IP Address&lt;/em&gt; of your USG and then set the &lt;em&gt;Password/Pre Shared Secret&lt;/em&gt;. When done hit save.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/images/vpnradiusprofile.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Next up on the configuration is the Radius Service Configuration. Browse to &lt;em&gt;Settings&lt;/em&gt; and &lt;em&gt;Services&lt;/em&gt;.
    &lt;ul&gt;
      &lt;li&gt;First up is the user, select Users and then enter in the following details.
        &lt;ul&gt;
          &lt;li&gt;Name: username&lt;/li&gt;
          &lt;li&gt;Password: password to be used for client conenctivity&lt;/li&gt;
          &lt;li&gt;VLAN: leave blank&lt;/li&gt;
          &lt;li&gt;Tunnel Type: 3 (For L2TP)&lt;/li&gt;
          &lt;li&gt;Tunnel Medium Type: 1 (For IPv4)&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/images/vpnradiususers.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Next up on the Radius Service configuration is the &lt;em&gt;Server&lt;/em&gt; Configuration.
    &lt;ul&gt;
      &lt;li&gt;Click on Server under Servers/Radius and &lt;em&gt;Enable Radius Server&lt;/em&gt;.
        &lt;ul&gt;
          &lt;li&gt;The only thing you will do here is set the &lt;em&gt;L2TP Secret&lt;/em&gt;.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/images/vpnradiusserver.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Next up on the configuration is to browse to &lt;em&gt;Settings&lt;/em&gt; and &lt;em&gt;Networks&lt;/em&gt;.
    &lt;ul&gt;
      &lt;li&gt;Here you will create a new network with the following details..
        &lt;ul&gt;
          &lt;li&gt;Purpose: Remote User VPN&lt;/li&gt;
          &lt;li&gt;VPN Type: L2TP Server&lt;/li&gt;
          &lt;li&gt;Pre Shared Key: This is the &lt;em&gt;secret&lt;/em&gt; you configured for the Radius Server.&lt;/li&gt;
          &lt;li&gt;Gateway/Subnet: IP Information for your VPN Clients&lt;/li&gt;
          &lt;li&gt;Other: Fill in other fields as needed.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/images/vpnnetworks.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Once everything is complete you will now have an extra bubble with VPN statistics!&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/dashboardview.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Nothing else is needed! Once the Unifi USG provisions it automatically adds in the needed firewall rules, you can now configure your normal L2TP client to connect.&lt;/p&gt;

    &lt;p&gt;&lt;a href=&quot;/ubiquiti/configuring-unifi-controller-and-usg-for-l2tp-vpn/&quot;&gt;Configuring Unifi Controller and USG for L2TP VPN&lt;/a&gt; was originally published by David Stamen at &lt;a href=&quot;&quot;&gt;davidstamen.com&lt;/a&gt; on April 25, 2017.&lt;/p&gt;
  </content>
</entry>


<entry>
  <title type="html"><![CDATA[Using PowerCLI to Set vCenter Permissions on Datacenter]]></title>
  <link rel="alternate" type="text/html" href="/powercli/using-powercli-to-set-vcenter-permissions-on-datacenter/" />
  <id>/powercli/using-powercli-to-set-vcenter-permissions-on-datacenter</id>
  <published>2017-04-17T00:00:00-04:00</published>
  <updated>2017-04-17T00:00:00-04:00</updated>
  <author>
    <name>David Stamen</name>
    <uri></uri>
    <email>dstamen@gmail.com</email>
  </author>
  <content type="html">
    &lt;p&gt;I have been working on doing a vCenter Consolidation Project. This has meant recreating multiple permissions groups. I couldnt find an easy way to apply permissions at a datacenter so I updated this script to be used.&lt;/p&gt;

&lt;h4 id=&quot;pre-requsites&quot;&gt;&lt;strong&gt;&lt;em&gt;Pre-Requsites&lt;/em&gt;&lt;/strong&gt;&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.vmware.com/support/developer/PowerCLI/&quot;&gt;VMware PowerCLI&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;link-to-script&quot;&gt;&lt;strong&gt;&lt;em&gt;Link to Script&lt;/em&gt;&lt;/strong&gt;&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/dstamen/PowerCLI/blob/master/Set-vCenterPermissions.ps1&quot;&gt;Set-vCenterPermissions.ps1&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/dstamen/PowerCLI/blob/master/permissions.csv&quot;&gt;permissions.csv&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;preparing-to-execute-the-script&quot;&gt;&lt;strong&gt;&lt;em&gt;Preparing to Execute the Script&lt;/em&gt;&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;The script is pretty straight forward, just need to update columns in the CSV such as Datacenter, Group and Role.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;This script assumes you have already launched PowerCLI and modified the csv&lt;/em&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# PowerCLI Script for setting vCenter Permissions base don AD Group and Datacenter
# @davidstamen
# http://davidstamen.com

param
(
    [Parameter(Mandatory=$False,
        HelpMessage=&#39;Path to CSV to Import&#39;)]
        [string[]]$permissionlist
)

#Import PowerCLI Module
Get-Module -ListAvailable VMware* | Import-Module

#Prompt for vCenter to Set Permissions
$vCenter = Read-Host -Prompt &quot;Name or IP address of vcenter&quot;

#Makes sure CSV was passed as parameter, if not it prompts and checks path.
If($permissionlist -eq $NULL){
    $permissionlist = Read-host -Prompt &quot;Csv to import&quot;
}
If((Test-Path $permissionlist) -eq $False){Write-host &quot;Could not find CSV.&quot;;break}

#tries to connect to vcenter and breaks script if it fails.
Try{Connect-viserver $vCenter -ErrorAction &quot;Stop&quot;|Out-Null}
Catch {Write-Warning &quot;Unable to Logon to $vCenter. Exiting...&quot;;break}

#define variables and loop through each entry setting permissions
$permission = Import-csv &quot;$permissionlist&quot;
foreach ($item in $permission) {
  $datacenter=$item.datacenter
  $role=$item.role
  $group=$item.group
  $domain=$item.domain

  Write-host &quot;Setting $group permissions to $role on $vCenter&quot; -ForegroundColor Green
  $Permission=New-VIPermission -Entity (Get-Datacenter $datacenter) -Principal (Get-VIAccount -Domain $domain -Group|Where-Object {$_.Name -like &quot;*$group*&quot;}) -Role (Get-VIRole $role) -Propagate:$true|Out-Null
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h4 id=&quot;execute-the-script&quot;&gt;&lt;strong&gt;&lt;em&gt;Execute the Script&lt;/em&gt;&lt;/strong&gt;&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;Run .\Set-vCenterPermissions.ps1 .\permissions.csv&lt;/li&gt;
&lt;/ul&gt;

    &lt;p&gt;&lt;a href=&quot;/powercli/using-powercli-to-set-vcenter-permissions-on-datacenter/&quot;&gt;Using PowerCLI to Set vCenter Permissions on Datacenter&lt;/a&gt; was originally published by David Stamen at &lt;a href=&quot;&quot;&gt;davidstamen.com&lt;/a&gt; on April 17, 2017.&lt;/p&gt;
  </content>
</entry>


<entry>
  <title type="html"><![CDATA[vExpert 2017]]></title>
  <link rel="alternate" type="text/html" href="/vmware/vexpert-2017/" />
  <id>/vmware/vexpert-2017</id>
  <published>2017-02-08T00:00:00-05:00</published>
  <updated>2017-02-08T00:00:00-05:00</updated>
  <author>
    <name>David Stamen</name>
    <uri></uri>
    <email>dstamen@gmail.com</email>
  </author>
  <content type="html">
    &lt;p&gt;I am honored to have been selected as a VMware vExpert once again for 2017!&lt;/p&gt;

&lt;p&gt;This is my fifth year as a vExpert (2013,2014,2015,2016 and 2017). It has been great to see the community grow and the amount of vExperts increase. I did a quick count, and in 2016 we are up to 1464 vExperts!&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://blogs.vmware.com/vmtn/files/2017/02/VMW-LOGO-vEXPERT-2017-k.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

    &lt;p&gt;&lt;a href=&quot;/vmware/vexpert-2017/&quot;&gt;vExpert 2017&lt;/a&gt; was originally published by David Stamen at &lt;a href=&quot;&quot;&gt;davidstamen.com&lt;/a&gt; on February 08, 2017.&lt;/p&gt;
  </content>
</entry>


<entry>
  <title type="html"><![CDATA[vSphere 6.5 - Updating Appliance configured with vCenter HA]]></title>
  <link rel="alternate" type="text/html" href="/vmware/vsphere-65-updating-appliance-configured-with-vcenter-ha/" />
  <id>/vmware/vsphere-65---updating-appliance-configured-with-vcenter-ha</id>
  <published>2017-02-03T00:00:00-05:00</published>
  <updated>2017-02-03T00:00:00-05:00</updated>
  <author>
    <name>David Stamen</name>
    <uri></uri>
    <email>dstamen@gmail.com</email>
  </author>
  <content type="html">
    &lt;p&gt;The first vSphere 6.5 Patch (6.5a) was just released! So far it seems there are a few critical fixes but the biggest feature is NSX 6.3 support.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://pubs.vmware.com/Release_Notes/en/vsphere/65/vsphere-vcenter-server-650a-release-notes.html&quot;&gt;vCenter Server 6.5a Release Notes&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://pubs.vmware.com/Release_Notes/en/vsphere/65/vsphere-esxi-650a-release-notes.html&quot;&gt;ESXi Server 6.5a Release Notes&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You can find patch information here. https://kb.vmware.com/kb/2148330&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;To download patch do not go to my.vmware.com, you need to navigate to the VMware Patch Download Center(https://my.vmware.com/group/vmware/patch) and select VC from the &lt;strong&gt;Search by Product&lt;/strong&gt; drop down, and then vSphere 6.5&lt;/li&gt;
  &lt;li&gt;You will then download the VMware-vCenter-Server-Appliance-6.5.0.5200-4944578-patch-FP.iso&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/images/v65up3.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Now that we have all the files we need, we can proceed with the actual upgrade.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Log into the vSphere webclient and put the vCenter HA into Maintenance Mode. Maintenance mode means replication still occurs but automatic failover is disabled.
    &lt;ul&gt;
      &lt;li&gt;Under Settings, select vCenter HA and click Edit.&lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;Select Maintenance Mode and click OK.&lt;/p&gt;

        &lt;p&gt;&lt;img src=&quot;/images/v65up2.png&quot; alt=&quot;&quot; /&gt;
  &lt;img src=&quot;/images/v65up1.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;SSH as root to the appliance shell of the Active Node using the Public IP.
    &lt;ul&gt;
      &lt;li&gt;Note: Make sure you are not in &lt;em&gt;shell&lt;/em&gt; but in &lt;em&gt;appliancesh&lt;/em&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;While in SSH of the active node, SSH to the witness node IP.
    &lt;ul&gt;
      &lt;li&gt;Note: Make sure you are not in &lt;em&gt;shell&lt;/em&gt; but in &lt;em&gt;appliancesh&lt;/em&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;We will now stage the patches to the witness node.
    &lt;ul&gt;
      &lt;li&gt;You will need to attach the patch .ISO you downloaded previously, as you cannot update straight from the URL since the witness/passive do not have internet access.&lt;/li&gt;
      &lt;li&gt;To stage the patches run the following command.
        &lt;ul&gt;
          &lt;li&gt;software-packages stage –iso –acceptEulas&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Command&amp;gt; software-packages stage --iso --acceptEulas
 [2017-02-03T07:44:01.034] : ISO mounted successfully
 [2017-02-03T07:44:01.034] : Staged 34 packages.
 [2017-02-03T07:44:01.034] : Verifying staging area
 [2017-02-03T07:44:01.034] : ISO unmounted successfully
 [2017-02-03T07:44:01.034] : Staging process completed successfully
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;We will now install the staged patches to the witness node.
    &lt;ul&gt;
      &lt;li&gt;To install the patches run the following command.
        &lt;ul&gt;
          &lt;li&gt;software-packages install –staged –acceptEulas&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Command&amp;gt; software-packages install --staged --acceptEulas
 [2017-02-03T07:46:10.034] : Validating software update payload
 [2017-02-03T07:46:10.034] : Validation successful
 [2017-02-03 07:46:10,986] : Copying software packages  [2017-02-03T07:46:11.034] : ISO mounted successfully
34/34
 [2017-02-03T07:46:21.034] : ISO unmounted successfully
 [2017-02-03 07:46:21,745] : Running test transaction ....
 [2017-02-03 07:46:22,757] : Running pre-install script.....
 [2017-02-03T07:46:24.034] : All VMware services are stopped.
 [2017-02-03 07:46:24,977] : Upgrading software packages ....
 [2017-02-03 07:47:01,087] : Running post-install script.....
 [2017-02-03T07:47:02.034] : Packages upgraded successfully, Reboot is required to complete the installation.
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;We will now reboot the witness node.
    &lt;ul&gt;
      &lt;li&gt;To reboot the witness node, while still in appliancesh run the following command.
        &lt;ul&gt;
          &lt;li&gt;shutdown reboot -r “patch reboot”&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;While in SSH of the active node, SSH to the passive node IP.
    &lt;ul&gt;
      &lt;li&gt;Note: Make sure you are not in &lt;em&gt;shell&lt;/em&gt; but in &lt;em&gt;appliancesh&lt;/em&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;We will now stage the patches to the passive node.
    &lt;ul&gt;
      &lt;li&gt;You will need to attach the patch .ISO you downloaded previously, as you cannot update straight from the URL since the witness/passive do not have internet access.&lt;/li&gt;
      &lt;li&gt;To stage the patches run the following command.
        &lt;ul&gt;
          &lt;li&gt;software-packages stage –iso –acceptEulas&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Command&amp;gt; software-packages stage --iso --acceptEulas
 [2017-02-03T12:56:34.034] : ISO mounted successfully
 [2017-02-03T12:56:34.034] : Staged 34 packages.
 [2017-02-03T12:56:34.034] : Verifying staging area
 [2017-02-03T12:56:35.034] : ISO unmounted successfully
 [2017-02-03T12:56:35.034] : Staging process completed successfully
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;We will now install the staged patches to the passive node.
    &lt;ul&gt;
      &lt;li&gt;To install the patches run the following command.
        &lt;ul&gt;
          &lt;li&gt;software-packages install –staged –acceptEulas&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Command&amp;gt; software-packages install --staged --acceptEulas
 [2017-02-03T12:56:57.034] : Validating software update payload
 [2017-02-03T12:56:57.034] : Validation successful
 [2017-02-03 12:56:57,376] : Copying software packages  [2017-02-03T12:56:57.034] : ISO mounted successfully
34/34
 [2017-02-03T12:57:07.034] : ISO unmounted successfully
 [2017-02-03 12:57:07,957] : Running test transaction ....
 [2017-02-03 12:57:08,966] : Running pre-install script.....
 [2017-02-03T12:57:10.034] : All VMware services are stopped.
 [2017-02-03 12:57:10,684] : Upgrading software packages ....
 [2017-02-03 12:57:34,750] : Running post-install script.....
 [2017-02-03T12:57:36.034] : Packages upgraded successfully, Reboot is required to complete the installation.
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;We will now reboot the passive node.
    &lt;ul&gt;
      &lt;li&gt;To reboot the passive node, while still in appliancesh run the following command.
        &lt;ul&gt;
          &lt;li&gt;shutdown reboot -r “patch reboot”&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Once the witness and passive nodes are online we will do a manual failover of the cluster.
    &lt;ul&gt;
      &lt;li&gt;Log in to the vSphere Web Client select the vCenter and click Configure.&lt;/li&gt;
      &lt;li&gt;Under Settings, select vCenter HA and click Initiate Failover.&lt;/li&gt;
      &lt;li&gt;Click Yes to start the failover.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;SSH as root to the appliance shell of the active node using the public IP.
    &lt;ul&gt;
      &lt;li&gt;Note: Make sure you are not in &lt;em&gt;shell&lt;/em&gt; but in &lt;em&gt;appliancesh&lt;/em&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;While in SSH of the active node, SSH to the new passive node IP.
    &lt;ul&gt;
      &lt;li&gt;Note: Make sure you are not in &lt;em&gt;shell&lt;/em&gt; but in &lt;em&gt;appliancesh&lt;/em&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;We will now stage the patches to the new passive node.
    &lt;ul&gt;
      &lt;li&gt;You will need to attach the patch .ISO you downloaded previously, as you cannot update straight from the URL since the witness/passive do not have internet access.&lt;/li&gt;
      &lt;li&gt;To stage the patches run the following command.
        &lt;ul&gt;
          &lt;li&gt;software-packages stage –iso –acceptEulas&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Command&amp;gt; software-packages stage --iso --acceptEulas
 [2017-02-03T08:10:08.034] : ISO mounted successfully
 [2017-02-03T08:10:09.034] : Staged 34 packages.
 [2017-02-03T08:10:09.034] : Verifying staging area
 [2017-02-03T08:10:09.034] : ISO unmounted successfully
 [2017-02-03T08:10:09.034] : Staging process completed successfully
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;We will now install the staged patches to the new passive node.
    &lt;ul&gt;
      &lt;li&gt;To install the patches run the following command.
        &lt;ul&gt;
          &lt;li&gt;software-packages install –staged –acceptEulas&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Command&amp;gt; software-packages install --staged --acceptEulas
 [2017-02-03T08:10:27.034] : Validating software update payload
 [2017-02-03T08:10:27.034] : Validation successful
 [2017-02-03 08:10:27,512] : Copying software packages  [2017-02-03T08:10:27.034] : ISO mounted successfully
34/34
 [2017-02-03T08:10:37.034] : ISO unmounted successfully
 [2017-02-03 08:10:37,780] : Running test transaction ....
 [2017-02-03 08:10:38,790] : Running pre-install script.....
 [2017-02-03T08:10:40.034] : All VMware services are stopped.
 [2017-02-03 08:10:40,401] : Upgrading software packages ....
 [2017-02-03 08:11:05,450] : Running post-install script.....
 [2017-02-03T08:11:06.034] : Packages upgraded successfully, Reboot is required to complete the installation.
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;We will now reboot the new passive node.
    &lt;ul&gt;
      &lt;li&gt;To reboot the witness node, while still in appliancesh run the following command.
        &lt;ul&gt;
          &lt;li&gt;shutdown reboot -r “patch reboot”&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;We will now wait for the passive node to come online, and then remove vCenter HA from Maintenance Mode.
    &lt;ul&gt;
      &lt;li&gt;Log in to the vSphere Web Client select the vCenter and click Configure.&lt;/li&gt;
      &lt;li&gt;Under Settings, select vCenter HA and click Edit.&lt;/li&gt;
      &lt;li&gt;Select Enable vCenter HA and click OK.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The upgrade is now done! After previously having to do VMware Heartbeat upgrades, this is definately much easier. This process is very straightforward and I had no issues.&lt;/p&gt;

&lt;p&gt;All in all this process took my less than 30 minutes to fully upgrade with no major issues.&lt;/p&gt;

&lt;p&gt;Leave a comment if you have any questions!&lt;/p&gt;

    &lt;p&gt;&lt;a href=&quot;/vmware/vsphere-65-updating-appliance-configured-with-vcenter-ha/&quot;&gt;vSphere 6.5 - Updating Appliance configured with vCenter HA&lt;/a&gt; was originally published by David Stamen at &lt;a href=&quot;&quot;&gt;davidstamen.com&lt;/a&gt; on February 03, 2017.&lt;/p&gt;
  </content>
</entry>


<entry>
  <title type="html"><![CDATA[vSphere 6.5 - vCenter HA Health Degraded due to Password Expiration]]></title>
  <link rel="alternate" type="text/html" href="/vmware/vcenter-ha-health-degraded-due-to-password-expiration/" />
  <id>/vmware/vcenter-ha---health-degraded-due-to-password-expiration</id>
  <published>2017-02-01T00:00:00-05:00</published>
  <updated>2017-02-01T00:00:00-05:00</updated>
  <author>
    <name>David Stamen</name>
    <uri></uri>
    <email>dstamen@gmail.com</email>
  </author>
  <content type="html">
    &lt;p&gt;One of my favorite new features of vSphere 6.5 is definately vCenter HA. I was checking out alerts when I noticed i had an alarm for vCenter HA being degraded.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/vchaerror1.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Looking through the GUI, I was unable to find anything in regards to why the Health was a warning and why the components would not sync. Then I remembered a previous case I had opened for VCHA.&lt;/p&gt;

&lt;p&gt;There is a log file located in &lt;strong&gt;&lt;em&gt;/var/log/vmware/vcha&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;As soon as i opened up &lt;strong&gt;&lt;em&gt;vcha.log&lt;/em&gt;&lt;/strong&gt; the issue was plain and clear.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;--&amp;gt; VMware vCenter Server Appliance 6.5.0.5100
--&amp;gt;
--&amp;gt; Type: vCenter Server with an embedded Platform Services Controller
--&amp;gt;
--&amp;gt; WARNING: Your password has expired.
--&amp;gt; Password change required but no TTY available.
--&amp;gt; rsync: connection unexpectedly closed (0 bytes received so far) [sender]
--&amp;gt; rsync error: error in rsync protocol data stream (code 12) at io.c(226) [sender=3.1.2]
--&amp;gt; ]
2017-01-31T08:00:22.515-05:00 warning vcha[7F80E0818700] [Originator@6876 sub=RsyncRepl-largeFrp] Rsync failed for vmw, retrying in 2 secs
2017-01-31T08:00:24.666-05:00 error vcha[7F80E0818700] [Originator@6876 sub=VchaUtil] Error executing command /usr/bin/rsync: exit status=[12], stdout=[], stderr=[
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;My Password has expired! How is this possible? Lucky for me &lt;a href=&quot;https://haveyoutriedreinstalling.com/2017/01/16/caution-vcha-user-password/&quot;&gt;Féidhlim O’Leary&lt;/a&gt; has already encountered this issue, and opened up a support case. The problem is due to the vcha user password expiring, it’s quite a simple fix.&lt;/p&gt;

&lt;p&gt;If you check the password age, you can see when the last password change is. This example my password has not expired yet, you can check the expiration date but running &lt;strong&gt;&lt;em&gt;chage –list vcha&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;root@vc [ ~ ]# chage --list vcha
Last password change                                    : Jan 05, 2017
Password expires                                        : Mar 06, 2017
Password inactive                                       : never
Account expires                                         : never
Minimum number of days between password change          : 1
Maximum number of days between password change          : 60
Number of days of warning before password expires       : 7
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;If the password is already expired, you can reset it by typing&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;passwd vcha
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Note: You will need to do this on all 3 nodes. You can ssh to the peer and witness through the primary if you know those IP’s&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Now, we can set our password to not expire.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;root@vc [ ~ ]# chage -m 0 -M 99999 vcha
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;If we recheck the password expiration, we can now see it is set to not expire.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;root@vc [ ~ ]# chage --list vcha
Last password change                                    : Jan 05, 2017
Password expires                                        : never
Password inactive                                       : never
Account expires                                         : never
Minimum number of days between password change          : 0
Maximum number of days between password change          : 99999
Number of days of warning before password expires       : 7
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;We will need to wait a few minutes for our replication cycles to complete, and voila! VCHA is now Healthy!&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/vchaerror1.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

    &lt;p&gt;&lt;a href=&quot;/vmware/vcenter-ha-health-degraded-due-to-password-expiration/&quot;&gt;vSphere 6.5 - vCenter HA Health Degraded due to Password Expiration&lt;/a&gt; was originally published by David Stamen at &lt;a href=&quot;&quot;&gt;davidstamen.com&lt;/a&gt; on February 01, 2017.&lt;/p&gt;
  </content>
</entry>


<entry>
  <title type="html"><![CDATA[Exporting PowerDNS Zones to Bind Files]]></title>
  <link rel="alternate" type="text/html" href="/powerdns/exporting-powerdns-zones-to-bind-files/" />
  <id>/powerdns/exporting-powerdns-zones-to-bind-files</id>
  <published>2017-01-31T00:00:00-05:00</published>
  <updated>2017-01-31T00:00:00-05:00</updated>
  <author>
    <name>David Stamen</name>
    <uri></uri>
    <email>dstamen@gmail.com</email>
  </author>
  <content type="html">
    &lt;p&gt;Can you easily export PowerDNS zones using a MySQL DB? The answer may not be as easy as it seems.&lt;/p&gt;

&lt;p&gt;I have been working on a Migration from PowerDNS using a MySQL DB. We have a custom solution which gets updated and gets pushed to Akamai. The problem is, this custom solution requires all the zones to be in bind format. Doing some research I found out there is no easy way to get these zones into a bind zone file. You could setup a secondary server and do zone transfers, but that wouldnt meet my requirements.&lt;/p&gt;

&lt;p&gt;Luckily I stumbled across this post by &lt;a href=&quot;http://jameslinden.com/code/powerdns-to-bind-zone/&quot;&gt;James Linden&lt;/a&gt; in which he created a PHP script that scrapes the entire database and then generates a bind file for each zone with the records.&lt;/p&gt;

&lt;p&gt;It is actually a pretty easy script to run, you need to fill in about 5 variables and then you are good to execute it. Here is a copy of the script in case it is no longer available. (It was created in 2013, but still works flawlessly!)&lt;/p&gt;

&lt;p&gt;All you need to do is update the 3 lines, to put in the MySQL DB IP, the username, password and database name. You will then enter in the nameservers and hostmaster to be used for the bind files.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;#!/bin/env php
&lt;span class=&quot;cp&quot;&gt;&amp;lt;?php&lt;/span&gt;

&lt;span class=&quot;sd&quot;&gt;/**
 * @copyright 2013 James Linden &amp;lt;kodekrash@gmail.com&amp;gt;
 * @author James Linden &amp;lt;kodekrash@gmail.com&amp;gt;
 * @url http://jameslinden.com/code/powerdns-to-bind-zone
 * @license BSD (2 clause) &amp;lt;http://www.opensource.org/licenses/BSD-2-Clause&amp;gt;
 */&lt;/span&gt;

&lt;span class=&quot;nv&quot;&gt;$pdns_db&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;host&#39;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;localhost&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;user&#39;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;root&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;pass&#39;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;powerdns&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;name&#39;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;powerdns&#39;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$zone_ns&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;ns1.lab.local&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;ns2.lab.local&#39;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$zone_adm&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;support.lab.local&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;nv&quot;&gt;$zones&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[];&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$db&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;mysqli&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$pdns_db&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;host&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$pdns_db&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;user&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$pdns_db&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;pass&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$pdns_db&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;name&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$q&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$db&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;query&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;SELECT * FROM domains&#39;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$r&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;fetch_assoc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;nv&quot;&gt;$d&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;strtolower&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;name&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
		&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$q1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$db&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;query&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;SELECT * FROM records WHERE domain_id=&#39;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;id&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
			&lt;span class=&quot;nv&quot;&gt;$x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;A&#39;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[],&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;CNAME&#39;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[],&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;NS&#39;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[],&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;MX&#39;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[],&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;TXT&#39;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
			&lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$r1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$q1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;fetch_assoc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
				&lt;span class=&quot;nv&quot;&gt;$r1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;name&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;strtolower&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$r1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;name&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
				&lt;span class=&quot;k&quot;&gt;switch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$r1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;type&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
					&lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;A&#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
						&lt;span class=&quot;nv&quot;&gt;$x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$r1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;type&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;][]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$r1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;name&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$r1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;content&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
					&lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
					&lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;CNAME&#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
						&lt;span class=&quot;nv&quot;&gt;$x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$r1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;type&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;][]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;trim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;str_replace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$r1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;name&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;.&#39;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;strtolower&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$r1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;content&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
					&lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
					&lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;NS&#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
						&lt;span class=&quot;nv&quot;&gt;$x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$r1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;type&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;][]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;strtolower&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$r1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;content&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
					&lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
					&lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;MX&#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
						&lt;span class=&quot;nv&quot;&gt;$x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$r1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;type&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;][]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$r1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;prio&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;strtolower&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$r1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;content&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
					&lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
					&lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;TXT&#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
						&lt;span class=&quot;nv&quot;&gt;$x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$r1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;type&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;][]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;trim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;str_replace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$r1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;name&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;.&#39;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$r1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;content&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
					&lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
				&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
			&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
			&lt;span class=&quot;nv&quot;&gt;$q1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;free&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
		&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
		&lt;span class=&quot;nv&quot;&gt;$zones&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$d&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;nv&quot;&gt;$q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;free&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$db&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;is_array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$zones&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$zones&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;nv&quot;&gt;$p&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;./tmp/&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;is_dir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$p&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;mkdir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$p&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
			&lt;span class=&quot;k&quot;&gt;die&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;Unable to make tmp directory&#39;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;PHP_EOL&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
		&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$zones&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;k&quot;&gt;foreach&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$zones&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$d&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$r&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
			&lt;span class=&quot;nv&quot;&gt;$x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;             &#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
			&lt;span class=&quot;nv&quot;&gt;$t&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;$TTL 43200&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;@ IN SOA &#39;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$zone_ns&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;. &#39;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$zone_adm&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;. (&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;7200&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;3600&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;604800&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;43200 )&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
			&lt;span class=&quot;k&quot;&gt;foreach&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$zone_ns&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$x&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
				&lt;span class=&quot;nv&quot;&gt;$t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;  IN NS      &#39;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;.&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
			&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
			&lt;span class=&quot;nv&quot;&gt;$t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
			&lt;span class=&quot;k&quot;&gt;foreach&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;MX&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$x&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
				&lt;span class=&quot;nv&quot;&gt;$t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;  IN MX &#39;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;str_pad&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39; &#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;STR_PAD_RIGHT&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;is_numeric&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;substr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;.&#39;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
			&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
			&lt;span class=&quot;nv&quot;&gt;$t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
			&lt;span class=&quot;k&quot;&gt;foreach&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;A&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$x&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
				&lt;span class=&quot;nv&quot;&gt;$t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;str_pad&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;.&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39; &#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;STR_PAD_RIGHT&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;  IN A &#39;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
			&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
			&lt;span class=&quot;nv&quot;&gt;$t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
			&lt;span class=&quot;k&quot;&gt;foreach&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;CNAME&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$x&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
				&lt;span class=&quot;nv&quot;&gt;$t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;str_pad&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39; &#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;STR_PAD_RIGHT&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;  IN CNAME &#39;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;.&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
			&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
			&lt;span class=&quot;nv&quot;&gt;$t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
			&lt;span class=&quot;k&quot;&gt;foreach&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;TXT&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$x&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
				&lt;span class=&quot;nv&quot;&gt;$t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;str_pad&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39; &#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;STR_PAD_RIGHT&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;  IN TXT &#39;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
			&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
			&lt;span class=&quot;nb&quot;&gt;file_put_contents&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$p&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$d&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;.zone&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;implode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;PHP_EOL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$t&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;PHP_EOL&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
		&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;cp&quot;&gt;?&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Once you have populated the script, you can run it by going to a commandline that has MySQL tools and PHP installed and run&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;php scriptname.php
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;This will create a &lt;em&gt;/tmp&lt;/em&gt; folder in the same directory with an export of all your zones.&lt;/p&gt;

&lt;p&gt;Thats it! I just wanted to blog about this in case other people were looking for a way to accomplish this, its actually quite simple!&lt;/p&gt;

&lt;p&gt;Thanks for stopping by.&lt;/p&gt;

    &lt;p&gt;&lt;a href=&quot;/powerdns/exporting-powerdns-zones-to-bind-files/&quot;&gt;Exporting PowerDNS Zones to Bind Files&lt;/a&gt; was originally published by David Stamen at &lt;a href=&quot;&quot;&gt;davidstamen.com&lt;/a&gt; on January 31, 2017.&lt;/p&gt;
  </content>
</entry>


<entry>
  <title type="html"><![CDATA[Functional Branding of vSphere Web Client Logon Page]]></title>
  <link rel="alternate" type="text/html" href="/vmware/functional-branding-of-vsphere-web-client-logon-page/" />
  <id>/vmware/functional-branding-of-vsphere-web-client-logon-page</id>
  <published>2017-01-19T00:00:00-05:00</published>
  <updated>2017-01-19T00:00:00-05:00</updated>
  <author>
    <name>David Stamen</name>
    <uri></uri>
    <email>dstamen@gmail.com</email>
  </author>
  <content type="html">
    &lt;p&gt;I had a use case I wanted to investigate in regards to the new VCHA that is part of VMware vCenter Server 6.5. One thing I noticed, is when you have VCHA configured, there is no way to know which node of the HA cluster you are connecting to without being logged on.&lt;/p&gt;

&lt;p&gt;As people have noted before &lt;a href=&quot;http://www.virtuallyghetto.com/2015/02/how-to-customize-the-new-vsphere-6-0-web-client-login-ui.html&quot;&gt;William Lam’s - How to Customize Webclient Login UI&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I figured since I am using the embedded SSO, I could update the login page to show any information for that particular node. In my case I updated the text to show which node you are connected to. You can see this without even logging in!&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/webclientbranding.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;How can I do this you ask? Easy! You just need to update one file, two if you would like to update your logo…&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Logon to your PSC or VC with Embedded PSC via SSH or FTP.&lt;/li&gt;
  &lt;li&gt;Make sure to backup the files before making any changes!&lt;/li&gt;
  &lt;li&gt;Update the following file &lt;strong&gt;/usr/lib/vmware-sso/vmware-sts/webapps/websso/WEB-INF/views/unpentry.jsp&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;If you look at lines 126-131, you can see a few lines of code you will need to update.&lt;/li&gt;
      &lt;li&gt;Line 127 - You can input your text here, my example was to post if i was connected to Primary or Secondary.&lt;/li&gt;
      &lt;li&gt;Line 130 - I commented out to hide the “VMware vCenter Single Sign-on” logo.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;To update your logo, you can overwrite the following file &lt;strong&gt;/usr/lib/vmware-sso/vmware-sts/webapps/websso/resources/img/vmwareLogoBigger.png&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;You may need to adjust your logo size for the right look&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Save and Upload your file and refresh your webclient UI and you will see your new branding!&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Here is a snippet of my code.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;   &amp;lt;div id=&quot;productName&quot;&amp;gt;
  Welcome to my Homelab!&amp;lt;/br&amp;gt;&amp;lt;h6&amp;gt;Connected to Primary Appliance (vcsa6-01.lab.local)&amp;lt;/h6&amp;gt;&amp;lt;/br&amp;gt;
    &amp;lt;script type=&quot;text/javascript&quot;&amp;gt;
      if (isVCLogin()) {
        //document.write(&quot;&amp;lt;img id=\&quot;VCSSO-Title\&quot; src=\&quot;../../resources/img/VCSSO-title.png\&quot; /&amp;gt;&quot;);
      }
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Please note this is #unsupported, but extremely useful! Hope you enjoy it. Leave a comment if you have any questions.&lt;/p&gt;

    &lt;p&gt;&lt;a href=&quot;/vmware/functional-branding-of-vsphere-web-client-logon-page/&quot;&gt;Functional Branding of vSphere Web Client Logon Page&lt;/a&gt; was originally published by David Stamen at &lt;a href=&quot;&quot;&gt;davidstamen.com&lt;/a&gt; on January 19, 2017.&lt;/p&gt;
  </content>
</entry>


<entry>
  <title type="html"><![CDATA[Using the VMware Content Libray Assistant Fling]]></title>
  <link rel="alternate" type="text/html" href="/vmware/using-the-vmware-content-libray-assistant-fling/" />
  <id>/vmware/using-the-vmware-content-libray-assistant-fling</id>
  <published>2016-12-29T00:00:00-05:00</published>
  <updated>2016-12-29T00:00:00-05:00</updated>
  <author>
    <name>David Stamen</name>
    <uri></uri>
    <email>dstamen@gmail.com</email>
  </author>
  <content type="html">
    &lt;p&gt;So VMware Flings have been on a roll recently. They have released what they call “VMware Content Library Assistant.” This is a java based CLI app, that connects to your vCenter and searchers for your templates and then automatically creates and uploads them.&lt;/p&gt;

&lt;p&gt;You can find the fling at the following URL…&lt;a href=&quot;https://labs.vmware.com/flings/vsphere-content-library-assistant&quot;&gt;https://labs.vmware.com/flings/vsphere-content-library-assistant)&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Once you download the fling, you can just run the following command.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;java -jar sphere-content-library-assistant-1.0.jar -s servername -u username -p password
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;In my case my java home isn’t setup on my mac so I had to run the following command to get it to work.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/Library/Internet\ Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/bin/java -jar /pathtofolder/vsphere-content-library-assistant-1.0.jar -s servername -u username -p password
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Davids-MacBook-Pro:~ davidstamen$ /Library/Internet\ Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/bin/java -jar /Users/davidstamen/Downloads/vsphere-content-library-assistant-1.0.0/vsphere-content-library-assistant-1.0.jar -s vcsa6-01.lab.local -u administrator@vsphere.local -p Password

This app can assist you to on-board VC Templates to Content Library by doing the following:
1. Scan Datastores &amp;amp; Discover VC Templates (*.vmtx)
2. Recommend optimal inventorying intelligently
3. Create Content Libraries
4. Import VC Templates as OVF to Content Libraries

Connecting to Server vcsa6-01.lab.local
Credentials: Username:administrator@vsphere.local
Connected to: VMware VirtualCenter ServerSLF4J: Class path contains multiple SLF4J bindings.
SLF4J: Found binding in [jar:file:/Users/davidstamen/Downloads/vsphere-content-library-assistant-1.0.0/vsphere-content-library-assistant-1.0.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: Found binding in [jar:file:/Users/davidstamen/Downloads/vsphere-content-library-assistant-1.0.0/vsphere-content-library-assistant-1.0.jar!/lib/slf4j-log4j12-1.6.6.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.
SLF4J: Actual binding is of type [org.slf4j.impl.Log4jLoggerFactory]


Found the following VC templates to on-board

┌─────────────────────────────────────────────────┬────────────────────────────────────────────────┐
│ Datastore                                       │ VC Templates                                   │
├─────────────────────────────────────────────────┼────────────────────────────────────────────────┤
│ NFS01                                           │ [WIN2016, 2012R2, UBUNTU1604]                  │
└─────────────────────────────────────────────────┴────────────────────────────────────────────────┘



Recommending import flows

High Import Speed

┌────────────────────────┬────────────────────────┬────────────────────────┬───────────────────────┐
│ VC Template            │ Will be imported to    │ Created on this        │ Connected Hosts       │
│                        │ new ContentLibrary     │ Datastore              │                       │
├────────────────────────┼────────────────────────┼────────────────────────┼───────────────────────┤
│ [WIN2016, 2012R2,      │ NFS01_ContentLibrary_H │ NFS01                  │ [nuc2.lab.local,      │
│ UBUNTU1604]            │ S                      │                        │ nuc1.lab.local]       │
└────────────────────────┴────────────────────────┴────────────────────────┴───────────────────────┘





High Availability

┌────────────────────────┬────────────────────────┬────────────────────────┬───────────────────────┐
│ VC Template            │ Will be imported to    │ Created on this        │ Connected Hosts       │
│                        │ new ContentLibrary     │ Datastore              │                       │
├────────────────────────┼────────────────────────┼────────────────────────┼───────────────────────┤
│ [WIN2016, 2012R2,      │ NFS01_ContentLibrary_H │ NFS01                  │ [nuc2.lab.local,      │
│ UBUNTU1604]            │ A                      │                        │ nuc1.lab.local]       │
└────────────────────────┴────────────────────────┴────────────────────────┴───────────────────────┘




Press 1 for High Import Speed
Press 2 for High Availability

1

Creating ContentLibrary &#39;NFS01_ContentLibrary_HS&#39; on &#39;NFS01&#39;                                               	Success
	Importing &#39;WIN2016&#39; to ContentLibrary &#39;NFS01_ContentLibrary_HS&#39;                                    	Success
	Importing &#39;2012R2&#39; to ContentLibrary &#39;NFS01_ContentLibrary_HS&#39;                                     	Success
	Importing &#39;UBUNTU1604&#39; to ContentLibrary &#39;NFS01_ContentLibrary_HS&#39;                                 	Success
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Here is an example of what it looks like after the fling is run.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/contentlibraryassistantfling.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

    &lt;p&gt;&lt;a href=&quot;/vmware/using-the-vmware-content-libray-assistant-fling/&quot;&gt;Using the VMware Content Libray Assistant Fling&lt;/a&gt; was originally published by David Stamen at &lt;a href=&quot;&quot;&gt;davidstamen.com&lt;/a&gt; on December 29, 2016.&lt;/p&gt;
  </content>
</entry>


<entry>
  <title type="html"><![CDATA[Installing Ubiquiti Unifi Controller]]></title>
  <link rel="alternate" type="text/html" href="/ubiquiti/installing-ubiquiti-unifi-controller/" />
  <id>/ubiquiti/installing-ubiquiti-unifi-controller</id>
  <published>2016-12-02T00:00:00-05:00</published>
  <updated>2016-12-02T00:00:00-05:00</updated>
  <author>
    <name>David Stamen</name>
    <uri></uri>
    <email>dstamen@gmail.com</email>
  </author>
  <content type="html">
    &lt;p&gt;I have been using Ubiquiti equipment for awhile at home and I figured i would finally write a blog post about it. Ubiquiti equipment is “enterprise class” equipment for the consumer.&lt;/p&gt;

&lt;p&gt;I figured I would create a post that goes over two ways of loading the controller. The first option will be installing it on Ubuntu on bare metal or a VM, the second option is a docker container.&lt;/p&gt;

&lt;p&gt;If you are installing this on a bare metal or virtual machine, i suggest a debian based image. My preference is Ubuntu.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;echo &quot;deb http://www.ubnt.com/downloads/unifi/debian unifi5 ubiquiti&quot; &amp;gt; \
  /etc/apt/sources.list.d/20ubiquiti.list &amp;amp;&amp;amp; \
  echo &quot;deb http://downloads-distro.mongodb.org/repo/debian-sysvinit dist 10gen&quot; &amp;gt; \
  /etc/apt/sources.list.d/21mongodb.list &amp;amp;&amp;amp; \
  apt-key adv --keyserver keyserver.ubuntu.com --recv C0A52C50 &amp;amp;&amp;amp; \
  apt-key adv --keyserver keyserver.ubuntu.com --recv 7F0CEB10

apt-get -q update &amp;amp;&amp;amp; \
  apt-get install -qy --force-yes --no-install-recommends unifi &amp;amp;&amp;amp; \
  apt-get -q clean &amp;amp;&amp;amp; \
  rm -rf /var/lib/apt/lists/*

service unifi start
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Once that completes you can access the controller at https://iporfqdn:8443&lt;/p&gt;

&lt;p&gt;A second option is to use a docker container. I built an image through some testing that is hosted on dockerhub &lt;a href=&quot;https://hub.docker.com/r/dstamen/unifi/&quot;&gt;dstamen/unifi&lt;/a&gt;. It works and there are plenty of images out there. It is based on the following &lt;a href=&quot;https://github.com/dstamen/unifi/blob/master/Dockerfile&quot;&gt;dockerfile&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;A few other containers to review that are highly recommended are &lt;a href=&quot;https://hub.docker.com/r/linuxserver/unifi/&quot;&gt;linuxserver/unifi&lt;/a&gt; and &lt;a href=&quot;https://hub.docker.com/r/jacobalberty/unifi/&quot;&gt;jacobalberty/unifi&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I hope this helps you on our way to getting your controller online.&lt;/p&gt;

    &lt;p&gt;&lt;a href=&quot;/ubiquiti/installing-ubiquiti-unifi-controller/&quot;&gt;Installing Ubiquiti Unifi Controller&lt;/a&gt; was originally published by David Stamen at &lt;a href=&quot;&quot;&gt;davidstamen.com&lt;/a&gt; on December 02, 2016.&lt;/p&gt;
  </content>
</entry>


<entry>
  <title type="html"><![CDATA[vSphere 6.5 - vCenter HA (VCHA) Issues]]></title>
  <link rel="alternate" type="text/html" href="/vmware/vsphere-65-vcha-issues/" />
  <id>/vmware/vsphere-65-vcha-issues</id>
  <published>2016-11-21T00:00:00-05:00</published>
  <updated>2016-11-21T00:00:00-05:00</updated>
  <author>
    <name>David Stamen</name>
    <uri></uri>
    <email>dstamen@gmail.com</email>
  </author>
  <content type="html">
    &lt;p&gt;So as everyone has probably seen, &lt;a href=&quot;https://blogs.vmware.com/vsphere/2016/11/vmware-announces-general-availability-vsphere-6-5.html&quot;&gt;vSphere 6.5&lt;/a&gt; is now GA. One of the features i have been waiting for the most is vCenter HA. I have spent some time trying to get this working in my lab. Unfortunately after countless tries i was stuck. Thanks to folks in the vExpert Slack for helping me try to resolve this, but unfortunately this was a case for VMware Support.&lt;/p&gt;

&lt;p&gt;Every time I would try to configure vCenter HA using the Advanced Wizard, I would get the following error.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;The operation is not allowed in the current state.
Failed to get management network information. Verify if management interface (NIC0) is configured correctly and is reachable.
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/images/vcha1.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Obviously, if I am accessing the vCenter the management IP has to be configured and reachable correct?&lt;/p&gt;

&lt;p&gt;Turns out we tried to look through the logs in &lt;strong&gt;/var/log/vmware/vcha&lt;/strong&gt; and they were no help. Next the technician tried to manually prepare for VCHA by running &lt;strong&gt;prepare-vcha&lt;/strong&gt;. Once we ran this we were able to see a specific error outputted.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Unable to get hostname resolved IP address for eth0
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;/images/vcha2.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;This is more helpful! Turns out my vCenter somehow was missing it’s reverse DNS entry. This is definitely bizarre as the VCSA requires a reverse DNS to deploy.&lt;/p&gt;

&lt;p&gt;Once I created the reverse DNS, the wizard finally let me through and configure vCenter HA!&lt;/p&gt;

&lt;p&gt;Big thank you to the vExpert community and VMware Support.&lt;/p&gt;

&lt;p&gt;Look forward to a formal KB and a more descriptive error in the future.&lt;/p&gt;

    &lt;p&gt;&lt;a href=&quot;/vmware/vsphere-65-vcha-issues/&quot;&gt;vSphere 6.5 - vCenter HA (VCHA) Issues&lt;/a&gt; was originally published by David Stamen at &lt;a href=&quot;&quot;&gt;davidstamen.com&lt;/a&gt; on November 21, 2016.&lt;/p&gt;
  </content>
</entry>


<entry>
  <title type="html"><![CDATA[vSphere 6.5 - New License Import from My VMware]]></title>
  <link rel="alternate" type="text/html" href="/vmware/vsphere-65-new-license-import-from-myvmware/" />
  <id>/vmware/vsphere-65-new-license-import-from-myvmware</id>
  <published>2016-11-16T00:00:00-05:00</published>
  <updated>2016-11-16T00:00:00-05:00</updated>
  <author>
    <name>David Stamen</name>
    <uri></uri>
    <email>dstamen@gmail.com</email>
  </author>
  <content type="html">
    &lt;p&gt;So as everyone has probably seen, &lt;a href=&quot;https://blogs.vmware.com/vsphere/2016/11/vmware-announces-general-availability-vsphere-6-5.html&quot;&gt;vSphere 6.5&lt;/a&gt; is now GA. As usual right away I have upgraded the homelab and have already found a neat new feature.&lt;/p&gt;

&lt;p&gt;When you are adding in your VMware licenses, you now have an option to &lt;strong&gt;Import License Keys Data…&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;To start you need to generate a report from &lt;a href=&quot;http://my.vmware.com&quot;&gt;my.vmware.com&lt;/a&gt;.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Log in and Navigate to &lt;strong&gt;Download Reports&lt;/strong&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Click on the &lt;strong&gt;Available Reports&lt;/strong&gt; dropdown, and select the &lt;strong&gt;Product Licenses, Details and History.&lt;/strong&gt; You will be asked which account you would like to select, and if there was a specific timeframe to select. In my case i have selected all accounts and then click Create.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;The report will take about a minute to generate. You can click on &lt;strong&gt;Refresh Table.&lt;/strong&gt; Once the report shows as complete. You can download it as a CSV. You will need this to complete the next steps.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Log into your vSphere 6.5 Flash client &lt;strong&gt;(http://fqdn/vsphere-client)&lt;/strong&gt; and click on &lt;strong&gt;Home&lt;/strong&gt; and then &lt;strong&gt;Licenses.&lt;/strong&gt; In the top right corner you will see an option to &lt;strong&gt;Import License Keys Data…&lt;/strong&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/images/licensekey1.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Now you will browse to the file you downloaded from &lt;strong&gt;my.vmware.com.&lt;/strong&gt; If you have not downloaded it yet, you can select on &lt;strong&gt;Learn how to generate this CSV file&lt;/strong&gt; to be shown the steps. Click &lt;strong&gt;Next&lt;/strong&gt;.&lt;/p&gt;

    &lt;p&gt;&lt;img src=&quot;/images/licensekey2.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;At this point, the uploaded CSV file will be analyzed to see what licenses can be imported into your vCenter Inventory. Click &lt;strong&gt;Next&lt;/strong&gt;.&lt;/p&gt;

    &lt;p&gt;&lt;img src=&quot;/images/licensekey3.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;The next screen will show what licenses were part of the CSV and give you an Overview. Click &lt;strong&gt;Next&lt;/strong&gt;.&lt;/p&gt;

    &lt;p&gt;&lt;img src=&quot;/images/licensekey5.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;If you have any existing keys, it will update them with the My VMware settings, if there are new keys it will add them with the notes from My VMware.&lt;/p&gt;

    &lt;p&gt;&lt;img src=&quot;/images/licensekey4.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;This new feature is definitely a step in the right direction. Maybe in vNext you can log directly into your My VMware account from the Web Client and have it automatically pull in your licenses.&lt;/p&gt;

    &lt;p&gt;&lt;a href=&quot;/vmware/vsphere-65-new-license-import-from-myvmware/&quot;&gt;vSphere 6.5 - New License Import from My VMware&lt;/a&gt; was originally published by David Stamen at &lt;a href=&quot;&quot;&gt;davidstamen.com&lt;/a&gt; on November 16, 2016.&lt;/p&gt;
  </content>
</entry>


<entry>
  <title type="html"><![CDATA[Using Powershell to Create Windows SMB Shares]]></title>
  <link rel="alternate" type="text/html" href="/windows/using-powershell-to-create-windows-smb-shares/" />
  <id>/windows/using-powershell-to-create-windows-smb-shares</id>
  <published>2016-08-09T00:00:00-04:00</published>
  <updated>2016-08-09T00:00:00-04:00</updated>
  <author>
    <name>David Stamen</name>
    <uri></uri>
    <email>dstamen@gmail.com</email>
  </author>
  <content type="html">
    &lt;p&gt;I have been knee deep in migrations, so after clicking through a few times to create clustered file shares, I finally decided to script them. Here is that script I thought I would share. Thanksfully there was the NTFSSecurity module published by microsoft that makes permissions a breeze. You can get more details by viewing the module page.&lt;/p&gt;

&lt;h4 id=&quot;pre-requsites&quot;&gt;&lt;strong&gt;&lt;em&gt;Pre-Requsites&lt;/em&gt;&lt;/strong&gt;&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://gallery.technet.microsoft.com/scriptcenter/1abd77a5-9c0b-4a2b-acef-90dbb2b84e85&quot;&gt;NTFS Security Module&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;link-to-script&quot;&gt;&lt;strong&gt;&lt;em&gt;Link to Script&lt;/em&gt;&lt;/strong&gt;&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/dstamen/Powershell/blob/master/Create-SMBShare.ps1&quot;&gt;Create-SMBShare.ps1&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;preparing-to-execute-the-script&quot;&gt;&lt;strong&gt;&lt;em&gt;Preparing to Execute the Script&lt;/em&gt;&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;Fill in the appropriate variables, and execute the script.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Import-Module NTFSSecurity

&lt;span class=&quot;c1&quot;&gt;#variables&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$sharename&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;share&quot;&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$cachingmode&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;none&quot;&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$continuouslyavailable&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$true&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$encryptdata&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$false&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$folderenumerationmode&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;AccessBased&quot;&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;D:&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\S&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;hares&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$scopename&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; = &quot;&lt;/span&gt;ClusterORResourceName&lt;span class=&quot;s2&quot;&gt;&quot;
&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$sharepath&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; = &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$path&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$sharename&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$fullaccess&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; = &quot;&lt;/span&gt;Everyone&lt;span class=&quot;s2&quot;&gt;&quot;


#check if path exists
&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$PathCheck&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; = Test-Path &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$sharepath&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;
if (&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$PathCheck&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; -eq &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$true&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;) {
    Write-Host &quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$sharepath&lt;/span&gt; exists.&lt;span class=&quot;s2&quot;&gt;&quot;
}
else {
    Write-Host &quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$sharepath&lt;/span&gt; does not exist&lt;span class=&quot;s2&quot;&gt;&quot;
    New-Item &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$sharepath&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; -type directory
}


#create share
New-SmbShare -Name &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$sharename&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; -CachingMode &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$cachingmode&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; -ContinuouslyAvailable &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$continuouslyavailable&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; -EncryptData &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$encryptdata&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; -FolderEnumerationMode &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$folderenumerationmode&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; -Path &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$sharepath&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; -ScopeName &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$scopename&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; -FullAccess &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$fullaccess&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;

#disable inheritance and add full access
Disable-NTFSAccessInheritance &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$sharepath&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; -RemoveInheritedAccessRules
Add-NTFSAccess &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$sharepath&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; -Account BUILTIN&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\A&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;dministrators -AccessRights FullControl
Get-NTFSAccess &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$sharepath&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h4 id=&quot;execute-the-script&quot;&gt;&lt;strong&gt;&lt;em&gt;Execute the Script&lt;/em&gt;&lt;/strong&gt;&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;Run .\Create-SMBShare.ps1&lt;/li&gt;
&lt;/ul&gt;

    &lt;p&gt;&lt;a href=&quot;/windows/using-powershell-to-create-windows-smb-shares/&quot;&gt;Using Powershell to Create Windows SMB Shares&lt;/a&gt; was originally published by David Stamen at &lt;a href=&quot;&quot;&gt;davidstamen.com&lt;/a&gt; on August 09, 2016.&lt;/p&gt;
  </content>
</entry>


<entry>
  <title type="html"><![CDATA[VMware Certified Advanced Professional 6 – Data Center Virtualization Design Guide (3V0 622)]]></title>
  <link rel="alternate" type="text/html" href="/certification/vmware-certified-advanced-professional-6-data-center-virtualization-design-guide-3v0-622/" />
  <id>/certification/vmware-certified-advanced-professional-6--data-center-virtualization-design-guide-3v0-622</id>
  <published>2016-07-25T00:00:00-04:00</published>
  <updated>2016-07-25T00:00:00-04:00</updated>
  <author>
    <name>David Stamen</name>
    <uri></uri>
    <email>dstamen@gmail.com</email>
  </author>
  <content type="html">
    &lt;p&gt;I am about to start down my path of studying for my VCAP6-DCV Design Exam. I figured I would throw up the blueprint and fill in each section as applicable. Either way here is the blueprint laid out for anyone who may benefit. This is it as of 7/25/16.&lt;/p&gt;

&lt;h2 id=&quot;section-1--create-a-vsphere-conceptual-design&quot;&gt;Section 1 – Create a vSphere Conceptual Design&lt;/h2&gt;

&lt;h4 id=&quot;objective-11--gather-and-analyze-business-requirements&quot;&gt;Objective 1.1 – Gather and analyze business requirements&lt;/h4&gt;

&lt;p&gt;Skills and Abilities&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Existing Content from VCAP5-DCD&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Associate a stakeholder with the information that needs to be collected.&lt;/li&gt;
  &lt;li&gt;Utilize inventory and assessment data from a current environment to define a baseline state.&lt;/li&gt;
  &lt;li&gt;Analyze customer interview data to explicitly define customer objectives for a conceptual design&lt;/li&gt;
  &lt;li&gt;Given results of the requirements gathering process, identify requirements for a conceptual design.&lt;/li&gt;
  &lt;li&gt;Categorize requirements by infrastructure qualities to prepare for logical design requirements.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;New Content&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Determine customer priorities for defined objectives.&lt;/li&gt;
  &lt;li&gt;Ensure that Availability, Manageability, Performance, Recoverability and Security (AMPRS) considerations are applied during the requirements gathering process.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Tools&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.vmware.com/a/customers/product/10/VMware+vSphere&quot;&gt;VMware Virtualization Case Studies&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.vmware.com/files/pdf/VMware-SMB-Survey.pdf&quot;&gt;The Benefits of Virtualization for Small and Medium Businesses&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://communities.vmware.com/docs/DOC-17409&quot;&gt;Functional vs. Non-Functional Requirements&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://communities.vmware.com/docs/DOC-17408&quot;&gt;Conceptual, Logical, Physical:  It is Simple&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://blogs.vmware.com/apps/2014/02/virtualize-business-critical-applications-vsphere-updated.html&quot;&gt;Virtualize Business Critical Applications (blog)&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.vmware.com/files/pdf/VMW_10Q1_WP_vSPHERE_USLET_EN_R6_proof.pdf&quot;&gt;Virtualizing Business Critical Applications on vSphere&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;objective-12--gather-and-analyze-application-requirements&quot;&gt;Objective 1.2 – Gather and analyze application requirements&lt;/h4&gt;

&lt;p&gt;Skills and Abilities&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Existing Content from VCAP5-DCD&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Gather and analyze application requirements for a given scenario.&lt;/li&gt;
  &lt;li&gt;Collect information needed in order to identify application dependencies.&lt;/li&gt;
  &lt;li&gt;Given one or more application requirements, determine the impact of the requirements on the design.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;New Content&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Determine the requirements for a set of applications that will be included in the design.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Tools&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.vmware.com/go/tcocalculator/&quot;&gt;VMware TCO Calculator&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.vmware.com/files/pdf/vmware-cost-per-application-calculator-methodology.pdf&quot;&gt;VMware Cost-Per-Application Calculator Methodology&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.vmware.com/business-critical-apps/oracle-virtualization/index.html&quot;&gt;Virtualizing Oracle with VMware&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.vmware.com/business-critical-apps/exchange/&quot;&gt;Virtualizing Exchange with VMware&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.vmware.com/business-critical-apps/sharepoint-virtualization/index.html&quot;&gt;Virtualize SharePoint with VMware vSphere&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.vmware.com/business-critical-apps/sql-virtualization/overview.html&quot;&gt;Virtualizing Microsoft SQL on VMware vSphere&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.vmware.com/business-critical-apps/sap-virtualization/index.html&quot;&gt;SAP and VMware Virtualization&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://campaign.vmware.com/imgs/campaigns/business_critical_apps/phase2/assets/VMW-WP-BUS-FINANCIAL-BENEFITS-VIRT-BENCHMARK.pdf&quot;&gt;Business and Financial Benefits of Virtualization: Customer Benchmarking Study&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;objective-13--determine-risks-requirements-constraints-and-assumptions&quot;&gt;Objective 1.3 – Determine Risks, Requirements, Constraints and Assumptions&lt;/h4&gt;

&lt;p&gt;Skills and Abilities&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Existing Content from VCAP5-DCD&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Differentiate between the concepts of risks, requirements, constraints, and assumptions.&lt;/li&gt;
  &lt;li&gt;Given a statement, determine whether it is a risk, requirement, constraint, or an assumption.&lt;/li&gt;
  &lt;li&gt;Analyze impact of VMware best practices to identified risks, constraints, and assumptions.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Tools&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://communities.vmware.com/docs/DOC-17431&quot;&gt;Developing Your Virtualization Strategy and Deployment Plan&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://communities.vmware.com/servlet/JiveServlet/download/30463-1-144389/CADs- Constraints, Assumptions (Risk, Requirements) &amp;amp; Dependencies.pdf&quot;&gt;Constraints, Assumptions (Risk, Requirements) &amp;amp; Dependencies&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;section-2--create-a-vsphere-6x-logical-design-from-an-existing-conceptual-design&quot;&gt;Section 2 – Create a vSphere 6.x Logical Design from an Existing Conceptual Design&lt;/h3&gt;

&lt;h4 id=&quot;objective-21--map-business-requirements-to-a-vsphere-6x-logical-design&quot;&gt;Objective 2.1 – Map Business Requirements to a vSphere 6.x Logical Design&lt;/h4&gt;

&lt;p&gt;Skills and Abilities&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Existing Content from VCAP5-DCD&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Analyze requirements for functional and non-functional elements.&lt;/li&gt;
  &lt;li&gt;Build non-functional requirements into a specific logical design.&lt;/li&gt;
  &lt;li&gt;Translate stated business requirements into a logical design.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;New Content&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Incorporate the current state of a customer environment into a logical design.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Tools&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://communities.vmware.com/docs/DOC-17408&quot;&gt;Conceptual, Logical, Physical:  It is Simple&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.vmware.com/files/pdf/vsphere/VMware-vSphere-Platform-Whats-New.pdf&quot;&gt;What’s New in VMware vSphere 6.0&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://communities.vmware.com/docs/DOC-17409&quot;&gt;Functional vs. Non-Functional Requirements&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://communities.vmware.com/docs/DOC-17410&quot;&gt;ITIL v3 Introduction and Overview&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.bredemeyer.com/pdf_files/ActionGuides/ConceptualArchitectureActionGuide.PDF&quot;&gt;Conceptual Architecture Action Guide&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://it.toolbox.com/blogs/bridging-gaps/systems-architecture-fundamentals-conceptual-logical-physical-designs-11352&quot;&gt;Systems Architecture Fundamentals – Conceptual, Logical, Physical Designs&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;objective-22--map-service-dependencies&quot;&gt;Objective 2.2 – Map Service Dependencies&lt;/h4&gt;

&lt;p&gt;Skills and Abilities&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Existing Content from VCAP5-DCD&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Analyze services to identify upstream and downstream service dependencies.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;New Content&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Evaluate dependencies for infrastructure and application services that will be included in a vSphere design.&lt;/li&gt;
  &lt;li&gt;Create Entity Relationship Diagrams that map service relationships and dependencies.&lt;/li&gt;
  &lt;li&gt;Analyze interfaces to be used with new and existing business processes.&lt;/li&gt;
  &lt;li&gt;Determine service dependencies for logical components.&lt;/li&gt;
  &lt;li&gt;Include service dependencies in a vSphere 6.x Logical Design.&lt;/li&gt;
  &lt;li&gt;Navigate logical components and their interdependencies and make decisions based upon all service relationships.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Tools&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.vmware.com/files/pdf/vmware-vcenter-app-discovery-mgr-datacenter-ops-WP-EN.pdf&quot;&gt;Datacenter Operational Excellence Through Automated Application Discovery &amp;amp; Dependency Mapping&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://vbikerblog.com/2014/11/05/vmware-application-dependencies-and-entity-relationship-diagrams-mk2/&quot;&gt;VMware Application Dependencies and Entity Relationship Diagrams MK2&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;objective-23--build-availability-requirements-into-a-vsphere-6x-logical-design&quot;&gt;Objective 2.3 – Build Availability Requirements into a vSphere 6.x Logical Design&lt;/h4&gt;

&lt;p&gt;Skills and Abilities&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Existing Content from VCAP5-DCD&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Determine availability component of service level agreements (SLAs) and service level management processes&lt;/li&gt;
  &lt;li&gt;Determine potential availability solutions for a logical design based on customer requirements.&lt;/li&gt;
  &lt;li&gt;Create an availability plan, including maintenance processes.&lt;/li&gt;
  &lt;li&gt;Balance availability requirements with other infrastructure qualities.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;New Content&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Evaluate which logical availability services can be used with a given vSphere solution.&lt;/li&gt;
  &lt;li&gt;Differentiate infrastructure qualities related to availability.&lt;/li&gt;
  &lt;li&gt;Describe the concept of redundancy and the risks associated with single points of failure&lt;/li&gt;
  &lt;li&gt;Explain class of nines methodology&lt;/li&gt;
  &lt;li&gt;Analyze a vSphere design and determine possible single points of failure.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Tools&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.vmware.com/files/pdf/vmware-vcenter-app-discovery-mgr-datacenter-ops-WP-EN.pdf&quot;&gt;Datacenter Operational Excellence Through Automated Application Discovery &amp;amp; Dependency Mapping&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://pubs.vmware.com/vsphere-60/topic/com.vmware.ICbase/PDF/vsphere-esxi-vcenter-server-60-availability-guide.pdf&quot;&gt;vSphere Availability Guide&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.vmware.com/files/pdf/smb/VMware-Protect-Your-Business-with-Automated-Business-Continuity-Solutions_Mar13.pdf&quot;&gt;Protect Your Business with Automated Business Continuity Solutions&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.vmware.com/files/pdf/techpaper/vmw-vsphere-high-availability.pdf&quot;&gt;VMware High Availability Deployment Best Practices&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;objective-24--build-manageability-requirements-into-a-vsphere-6x-logical-design&quot;&gt;Objective 2.4 – Build Manageability Requirements into a vSphere 6.x Logical Design&lt;/h4&gt;

&lt;p&gt;Skills and Abilities&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;New Content&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Evaluate which management services can be used with a given vSphere Solution.&lt;/li&gt;
  &lt;li&gt;Differentiate infrastructure qualities related to management.&lt;/li&gt;
  &lt;li&gt;Differentiate available command line-based management tools (PowerCLI, vMA etc.)&lt;/li&gt;
  &lt;li&gt;Evaluate VMware Management solutions based on customer requirements.&lt;/li&gt;
  &lt;li&gt;Build interfaces into the logical design for existing operations practices.&lt;/li&gt;
  &lt;li&gt;Address identified operational readiness deficiencies&lt;/li&gt;
  &lt;li&gt;Define Event, Incident and Problem Management practices.&lt;/li&gt;
  &lt;li&gt;Analyze Release Management practices&lt;/li&gt;
  &lt;li&gt;Determine request fulfillment and release management processes.&lt;/li&gt;
  &lt;li&gt;Determine requirements for Configuration Management&lt;/li&gt;
  &lt;li&gt;Define change management processes based on business requirements.&lt;/li&gt;
  &lt;li&gt;Based on customer requirements, identify required reporting assets and processes&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Tools&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://communities.vmware.com/docs/DOC-17396&quot;&gt;Optimizing Your VMware Environment&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://communities.vmware.com/docs/DOC-17397&quot;&gt;Four Keys to Managing Your VMware Environment&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://communities.vmware.com/docs/DOC-11457&quot;&gt;Operational Readiness Assessment&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://communities.vmware.com/servlet/JiveServlet/download/11457-1-32094/VMware_OR_Self_Assessment.xls&quot;&gt;Operational Readiness Assessment Tool&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://pubs.vmware.com/vsphere-60/topic/com.vmware.ICbase/PDF/vsphere-esxi-vcenter-server-60-host-management-guide.pdf&quot;&gt;vCenter Server and Host Management Guide&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.vmware.com/support/developer/PowerCLI/&quot;&gt;vSphere PowerCLI documentation Center&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;objective-25--build-performance-requirements-into-a-vsphere-6x-logical-design&quot;&gt;Objective 2.5 – Build Performance Requirements into a vSphere 6.x Logical Design&lt;/h4&gt;

&lt;p&gt;Skills and Abilities&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;New Content&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Evaluate logical performance considerations for a given vSphere solution.&lt;/li&gt;
  &lt;li&gt;Differentiate infrastructure qualities related to performance.&lt;/li&gt;
  &lt;li&gt;Analyze current performance, identify and address gaps when building the logical design&lt;/li&gt;
  &lt;li&gt;Using a conceptual design, create a logical design that meets performance requirements&lt;/li&gt;
  &lt;li&gt;Determine performance-related functional requirements based on given non-functional requirements and service dependencies.&lt;/li&gt;
  &lt;li&gt;Define capacity management practices and create a capacity plan&lt;/li&gt;
  &lt;li&gt;Incorporate scalability requirements into the logical design&lt;/li&gt;
  &lt;li&gt;Determine a performance component for service level agreements and service level management processes.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Tools&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://communities.vmware.com/docs/DOC-11484&quot;&gt;Proven Practice: Implementing ITIL v3 Capacity Management in a VMware environment&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://pubs.vmware.com/vsphere-60/topic/com.vmware.ICbase/PDF/vsphere-esxi-vcenter-server-60-monitoring-performance-guide.pdf&quot;&gt;vSphere Monitoring and Performance Guide&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;objective-26--build-recoverability-requirements-into-a-vsphere-6x-logical-design&quot;&gt;Objective 2.6 – Build Recoverability Requirements into a vSphere 6.x Logical Design&lt;/h4&gt;

&lt;p&gt;Skills and Abilities&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;New Content&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Evaluate which logical recoverability services are available for a given vSphere solution.&lt;/li&gt;
  &lt;li&gt;Differentiate infrastructure qualities related to recoverability.&lt;/li&gt;
  &lt;li&gt;Determine Business Continuity and Disaster Recovery solution options for a given vSphere Design.&lt;/li&gt;
  &lt;li&gt;Given recoverability requirements, analyze services that will be impacted and provide a recovery plan for impacted services.&lt;/li&gt;
  &lt;li&gt;Plan a data retention policy based on customer requirements.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Tools&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.vmware.com/files/pdf/products/SRM/VMware-vCenter-Site-Recovery-Manager-Evaluation-Guide.pdf&quot;&gt;VMware vCenter™ Site Recovery Manager Evaluation Guide&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.vmware.com/files/pdf/practical_guide_bcdr_vmb.pdf&quot;&gt;A Practical Guide to Business Continuity and Disaster Recovery with VMware Infrastructure&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://download3.vmware.com/elq/img/EMEA/EMEA11122/pdf/VirtMngt_MasteringDisasterRecovery_WhitePaper_Q410_EN.pdf?cid=70180000000wCtz&quot;&gt;Mastering Disaster Recovery:  Business Continuity and Virtualization Best Practices Whitepaper&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;objective-27--build-security-requirements-into-a-vsphere-6x-logical-design&quot;&gt;Objective 2.7 – Build Security Requirements into a vSphere 6.x Logical Design&lt;/h4&gt;

&lt;p&gt;Skills and Abilities&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;New Content&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Evaluate which security services can be used with a given vSphere solution.&lt;/li&gt;
  &lt;li&gt;Differentiate infrastructure qualities related to security.&lt;/li&gt;
  &lt;li&gt;Build specific regulatory compliance requirements into the logical design.&lt;/li&gt;
  &lt;li&gt;Analyze application and infrastructure security requirements.&lt;/li&gt;
  &lt;li&gt;Build a role-based access model and map roles to services.&lt;/li&gt;
  &lt;li&gt;Build a security policy based on existing security requirements and IT governance practices.&lt;/li&gt;
  &lt;li&gt;Incorporate customer risk tolerance into the security policy.&lt;/li&gt;
  &lt;li&gt;Assess the services that will be impacted and create an access management plan.&lt;/li&gt;
  &lt;li&gt;Determine the proper security solution that would satisfy a regulatory requirement.&lt;/li&gt;
  &lt;li&gt;Based on stated security requirements, analyze the current state for compliance/non-compliance.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Tools&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://pubs.vmware.com/vsphere-60/topic/com.vmware.ICbase/PDF/vsphere-esxi-vcenter-server-60-security-guide.pdf&quot;&gt;vSphere Security Guide&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://communities.vmware.com/docs/DOC-17431&quot;&gt;Developing Your Virtualization Strategy and Deployment Plan&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.vmware.com/files/pdf/technology/compliance_virtualized_environment_wp.pdf&quot;&gt;Achieving Compliance in a Virtualized Environment&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.vmware.com/files/pdf/cloud/vmware-cloud-solution-security-in-the-cloud-wp-en.pdf&quot;&gt;Infrastructure Security:  Getting to the Bottom of Compliance in the Cloud&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.vmware.com/files/pdf/cloud/VMware-Savvis-Cloud-WP-en.pdf&quot;&gt;Securing the Cloud&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;section-3--create-a-vsphere-6x-physical-design-from-an-existing-logical-design&quot;&gt;Section 3 – Create a vSphere 6.x Physical Design from an Existing Logical Design&lt;/h3&gt;

&lt;h4 id=&quot;objective-31--transition-from-a-logical-design-to-a-vsphere-6x-physical-design&quot;&gt;Objective 3.1 – Transition from a Logical Design to a vSphere 6.x Physical Design&lt;/h4&gt;

&lt;p&gt;Skills and Abilities&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Existing Content from VCAP5-DCD&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Based on business requirements, determine the appropriate roles for each staff member.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;New Content&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Analyze design decisions and options selected from the logical design&lt;/li&gt;
  &lt;li&gt;Determine impact of VMware best practices to identified risks, constraints, and assumptions in a given vSphere design.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Tools&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://communities.vmware.com/docs/DOC-17408&quot;&gt;Conceptual, Logical, Physical:  It is Simple&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://pubs.vmware.com/vsphere-60/topic/com.vmware.ICbase/PDF/vsphere-esxi-vcenter-server-60-host-management-guide.pdf&quot;&gt;vSphere Server and Host Management Guide&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://pubs.vmware.com/vsphere-60/topic/com.vmware.ICbase/PDF/vsphere-esxi-vcenter-server-60-virtual-machine-admin-guide.pdf&quot;&gt;vSphere Virtual Machine Administration Guide&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;objective-32--create-a-vsphere-6x-physical-network-design-from-an-existing-logical-design&quot;&gt;Objective 3.2 – Create a vSphere 6.x Physical Network Design from an Existing Logical Design&lt;/h4&gt;

&lt;p&gt;Skills and Abilities&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Existing Content from VCAP5-DCD&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Analyze VLAN options with respect to virtual and physical switches.&lt;/li&gt;
  &lt;li&gt;Given business requirements, determine the design for virtual network components:
    &lt;ul&gt;
      &lt;li&gt;STP&lt;/li&gt;
      &lt;li&gt;Jumbo Frames&lt;/li&gt;
      &lt;li&gt;Load-balancing&lt;/li&gt;
      &lt;li&gt;Trunking and link aggregation groups&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Evaluate network redundancy considerations for a given design.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;New Content&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Analyze design for inclusion of Network I/O Control capabilities.&lt;/li&gt;
  &lt;li&gt;Determine use case for multiple TCP/IP stacks in a given design.&lt;/li&gt;
  &lt;li&gt;Based on given functional requirements for each service:&lt;/li&gt;
  &lt;li&gt;Determine the most appropriate networking technologies for the design&lt;/li&gt;
  &lt;li&gt;Implement the service based on the required infrastructure qualities (AMPRS.)&lt;/li&gt;
  &lt;li&gt;Analyze design for appropriate network teaming and failover solution.&lt;/li&gt;
  &lt;li&gt;Determine network security and firewall requirements for a virtual network design&lt;/li&gt;
  &lt;li&gt;Based on service level requirements, determine appropriate network performance characteristics.&lt;/li&gt;
  &lt;li&gt;Given a current network configuration as well as technical requirements and constraints, determine the appropriate virtual switch solution:
    &lt;ul&gt;
      &lt;li&gt;vSphere Standard Switch&lt;/li&gt;
      &lt;li&gt;vSphere Distributed Switch&lt;/li&gt;
      &lt;li&gt;NSX&lt;/li&gt;
      &lt;li&gt;Hybrid solutions&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Based on an existing logical design, determine appropriate host networking resources.&lt;/li&gt;
  &lt;li&gt;Properly apply converged networking considering VMware best practices.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Tools&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://pubs.vmware.com/vsphere-60/topic/com.vmware.ICbase/PDF/vsphere-esxi-vcenter-server-60-host-management-guide.pdf&quot;&gt;vSphere Server and Host Management Guide&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://pubs.vmware.com/vsphere-60/topic/com.vmware.ICbase/PDF/vsphere-esxi-vcenter-server-60-installation-setup-guide.pdf&quot;&gt;vSphere Installation and Setup Guide&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://pubs.vmware.com/vsphere-60/topic/com.vmware.ICbase/PDF/vsphere-esxi-vcenter-server-60-networking-guide.pdf&quot;&gt;vSphere Networking Guide&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://kb.vmware.com/selfservice/microsites/search.do?language=en_US&amp;amp;cmd=displayKC&amp;amp;externalId=2131180&quot;&gt;Network Port Diagram for vSphere 6.x&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.vmware.com/files/pdf/products/vsan/VSAN_Design_and_Sizing_Guide.pdf&quot;&gt;VMware Virtual SAN Network Design Guide&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.vmware.com/files/pdf/VMware-vSphere-PNICs-perf.pdf&quot;&gt;Leveraging NIC Technology to Improve Network Performance in VMware vSphere&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.vmware.com/files/pdf/techpaper/Network-IOC-vSphere6-Performance-Evaluation.pdf&quot;&gt;Performance Evaluation of Network I/O Control in VMware vSphere 6&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.vmware.com/files/pdf/vmotion-perf-vsphere5.pdf&quot;&gt;vMotion Architecture, Performance and Best Practices in VMware vSphere 5&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;objective-33--create-a-vsphere-6x-physical-storage-design-from-an-existing-logical-design&quot;&gt;Objective 3.3 – Create a vSphere 6.x Physical Storage Design from an Existing Logical Design&lt;/h4&gt;

&lt;p&gt;Skills and Abilities&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Existing Content from VCAP5-DCD&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Based on the logical design and given functional requirements, for each service:
    &lt;ul&gt;
      &lt;li&gt;Determine the most appropriate storage technologies for the design&lt;/li&gt;
      &lt;li&gt;Implement the service based on the required infrastructure qualities&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Based on service level requirements include VMware technologies in the design, such as:
    &lt;ul&gt;
      &lt;li&gt;Storage I/O Control and Network I/O Control&lt;/li&gt;
      &lt;li&gt;Storage Policies&lt;/li&gt;
      &lt;li&gt;Storage vMotion&lt;/li&gt;
      &lt;li&gt;Storage DRS&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;New Content&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Evaluate criteria, capabilities and limitations between storage types (Block, NAS, Object Based)&lt;/li&gt;
  &lt;li&gt;In a given design, determine Storage Policy availability and performance characteristics&lt;/li&gt;
  &lt;li&gt;Based on service level requirements include VMware technologies in the design, such as:
    &lt;ul&gt;
      &lt;li&gt;Virtual SAN&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Ensure storage array capabilities are supported in a vSphere 6.x design:
    &lt;ul&gt;
      &lt;li&gt;Active/Active, Active/Passive&lt;/li&gt;
      &lt;li&gt;ALUA, VAAI, VASA&lt;/li&gt;
      &lt;li&gt;PSA (including PSPs and SATPs)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Given the functional requirements, size the storage for capacity, availability and performance, including:
    &lt;ul&gt;
      &lt;li&gt;Datastores, RDMs, Virtual Disks&lt;/li&gt;
      &lt;li&gt;Physical Storage (LUNs, Storage Tiering)&lt;/li&gt;
      &lt;li&gt;Based on the logical design, select and incorporate an appropriate storage network into the physical design:&lt;/li&gt;
      &lt;li&gt;Block (FC, iSCSI, FCoE, SAS)&lt;/li&gt;
      &lt;li&gt;NAS (NFSv3, NFSv4)&lt;/li&gt;
      &lt;li&gt;Object Based (Virtual SAN, Virtual Volumes&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Tools&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.vmware.com/files/pdf/products/vsan/VMware_Virtual_SAN_Whats_New.pdf&quot;&gt;What’s New: VMware Virtual SAN 6.0&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.vmware.com/files/pdf/products/vsan/VSAN_Design_and_Sizing_Guide.pdf&quot;&gt;VMware Virtual SAN 6.0 Design and Sizing Guide&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.vmware.com/files/pdf/products/vsan/VSAN-Troubleshooting-Reference-Manual.pdf&quot;&gt;VMware Virtual SAN Diagnostics and Troubleshooting Reference Manual&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.vmware.com/files/pdf/solutions/VMware-Perspective-on-software-defined-storage-white-paper.pdf&quot;&gt;The VMware Perspective on Software-Defined Storage&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://pubs.vmware.com/vsphere-60/topic/com.vmware.ICbase/PDF/vsphere-esxi-vcenter-server-60-storage-guide.pdf&quot;&gt;vSphere Storage&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://pubs.vmware.com/vsphere-60/topic/com.vmware.ICbase/PDF/vsphere-esxi-vcenter-server-60-resource-management-guide.pdf&quot;&gt;Resource Management Guide&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://vsantco.vmware.com/vsan/SI/SIEV&quot;&gt;Virtual SAN TCO and Sizing Calculator&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.vmware.com/files/pdf/products/virtualvolumes/VMware-Whats-New-vSphere-Virtual-Volumes.pdf&quot;&gt;What’s New: VMware vSphere Virtual Volumes&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://pubs.vmware.com/vsphere-60/topic/com.vmware.ICbase/PDF/vsphere-esxi-vcenter-server-60-installation-setup-guide.pdf&quot;&gt;vSphere Installation and Setup Guide&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.vmware.com/pdf/vmfs-best-practices-wp.pdf&quot;&gt;VMware Virtual Machine File System: Technical Overview and Best Practices&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;objective-34--determine-appropriate-compute-resources-for-a-vsphere-6x-physical-design&quot;&gt;Objective 3.4 – Determine Appropriate Compute Resources for a vSphere 6.x Physical Design&lt;/h4&gt;

&lt;p&gt;Skills and Abilities&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Analyze best practices with respect to CPU family choices.&lt;/li&gt;
  &lt;li&gt;Evaluate NUMA and vNUMA with ESXi hosts and Virtual machines in a given design.&lt;/li&gt;
  &lt;li&gt;Analyze the following in a vSphere design:&lt;/li&gt;
  &lt;li&gt;Enhanced vMotion compatibility&lt;/li&gt;
  &lt;li&gt;Implications of vSMP in virtual machines&lt;/li&gt;
  &lt;li&gt;Transparent Page Sharing (TPS) and large pages&lt;/li&gt;
  &lt;li&gt;Resource overcommitment&lt;/li&gt;
  &lt;li&gt;Based on the service catalog and given functional requirements:&lt;/li&gt;
  &lt;li&gt;Determine the most appropriate compute technologies for the design&lt;/li&gt;
  &lt;li&gt;Implement the service based on the required infrastructure qualities.&lt;/li&gt;
  &lt;li&gt;Determine the impact of a technical design on the choice of server density:&lt;/li&gt;
  &lt;li&gt;Scale Up/Out&lt;/li&gt;
  &lt;li&gt;Auto Deploy&lt;/li&gt;
  &lt;li&gt;Calculate the required number of nodes in an HA cluster based upon host failures and resource guarantees&lt;/li&gt;
  &lt;li&gt;Evaluate the implications of using reservations, limits, and shares on the physical design.&lt;/li&gt;
  &lt;li&gt;Specify the resource pool and vApp configuration based upon resource requirements.&lt;/li&gt;
  &lt;li&gt;Size the following resources appropriately:&lt;/li&gt;
  &lt;li&gt;Memory&lt;/li&gt;
  &lt;li&gt;CPU&lt;/li&gt;
  &lt;li&gt;I/O devices&lt;/li&gt;
  &lt;li&gt;Internal storage&lt;/li&gt;
  &lt;li&gt;Given a constraint to use existing hardware, determine suitability of the hardware for the design.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Tools&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://pubs.vmware.com/vsphere-60/topic/com.vmware.ICbase/PDF/vsphere-esxi-vcenter-server-60-host-management-guide.pdf&quot;&gt;vSphere Server and Host Management Guide&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.vmware.com/files/pdf/vsphere/VMware-vSphere-Platform-Whats-New.pdf&quot;&gt;What’s New in the VMware vSphere® 6.0 Platform&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://pubs.vmware.com/vsphere-60/topic/com.vmware.ICbase/PDF/vsphere-esxi-vcenter-server-60-installation-setup-guide.pdf&quot;&gt;vSphere Installation and Setup Guide&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://pubs.vmware.com/vsphere-60/topic/com.vmware.ICbase/PDF/vsphere-esxi-vcenter-server-60-resource-management-guide.pdf&quot;&gt;vSphere Resource Management Guide&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.vmware.com/files/pdf/techpaper/VMware-PerfBest-Practices-vSphere6-0.pdf&quot;&gt;Performance Best Practices for VMware vSphere 6.0&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.vmware.com/files/pdf/techpaper/vmware-vCenter6-perf.pdf&quot;&gt;VMware vCenter Server Performance and Best Practices&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.vmware.com/files/pdf/techpaper/VMW-Tuning-Latency-Sensitive-Workloads.pdf&quot;&gt;Best Practices for Performance Tuning of Latency-Sensitive Workloads in vSphere VMs&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.vmware.com/files/pdf/solutions/VMware-SQL-Server-vSphere6-Performance.pdf&quot;&gt;Performance Characterization of Microsoft SQL Server on VMware vSphere 6 &lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.vmware.com/files/pdf/Exchange_2013_on_VMware_Best_Practices_Guide.pdf&quot;&gt;Microsoft Exchange 2013 on VMware Best Practices Guide&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://pubs.vmware.com/vsphere-60/topic/com.vmware.ICbase/PDF/vsphere-esxi-vcenter-server-60-monitoring-performance-guide.pdf&quot;&gt;vSphere Monitoring and Performance Guide&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://communities.vmware.com/docs/DOC-9279&quot;&gt;Interpreting esxtop statistics&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;objective-35--determine-virtual-machine-configuration-for-a-vsphere-6x-physical-design&quot;&gt;Objective 3.5 – Determine Virtual Machine Configuration for a vSphere 6.x Physical Design&lt;/h4&gt;

&lt;p&gt;Skills and Abilities&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Analyze the use of an RDM or a virtual disk for a given VM.&lt;/li&gt;
  &lt;li&gt;Evaluate Virtual Machine memory management techniques (ballooning, compression, swapping) in a given vSphere design.&lt;/li&gt;
  &lt;li&gt;Based on business requirements, determine the design significance of VM Swap location.&lt;/li&gt;
  &lt;li&gt;Determine the latency sensitivity requirements of a given virtual machine workload.&lt;/li&gt;
  &lt;li&gt;Evaluate virtual machine features based on the logical, functional and application requirements.&lt;/li&gt;
  &lt;li&gt;Use VMware best practices to size virtual machines according to application requirements.&lt;/li&gt;
  &lt;li&gt;Determine if reservations, shares, and limits are necessary.&lt;/li&gt;
  &lt;li&gt;Based on an existing logical design, determine virtual hardware options.&lt;/li&gt;
  &lt;li&gt;Build a Content Library of appropriate virtual machine offerings (e.g. templates, OVFs, ISOs.)&lt;/li&gt;
  &lt;li&gt;Determine appropriate use cases for vApps.&lt;/li&gt;
  &lt;li&gt;Evaluate the suitability of using VMware FT or 3rd party clustering products (e.g. Microsoft Clustering, etc.) based on application requirements.&lt;/li&gt;
  &lt;li&gt;Determine the impact of scheduled guest activities (e.g. anti-virus, backup, etc) to the design.&lt;/li&gt;
  &lt;li&gt;Evaluate vFlash read cache requirements in a given design.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Tools&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://pubs.vmware.com/vsphere-60/topic/com.vmware.ICbase/PDF/vsphere-esxi-vcenter-server-60-virtual-machine-admin-guide.pdf&quot;&gt;Virtual Machine Administration Guide&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.vmware.com/files/pdf/techpaper/VMW-Tuning-Latency-Sensitive-Workloads.pdf&quot;&gt;Best Practices for Performance Tuning of Latency-Sensitive Workloads in vSphere VMs&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.vmware.com/files/pdf/Virtualizing_Windows_Active_Directory.pdf&quot;&gt;Virtualizing a Windows Active Directory Domain Infrastructure&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://partnerweb.vmware.com/GOSIG/home.html&quot;&gt;Guest Operating System Installation Guide&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://pubs.vmware.com/vsphere-60/topic/com.vmware.ICbase/PDF/vsphere-esxi-vcenter-server-60-resource-management-guide.pdf&quot;&gt;vSphere Resource Management Guide&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.vmware.com/files/pdf/mem_mgmt_perf_vsphere5.pdf&quot;&gt;Understanding Memory Management in VMware vSphere 6.0&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;objective-36--determine-data-center-management-options-for-a-vsphere-6x-physical-design&quot;&gt;Objective 3.6 – Determine Data Center Management Options for a vSphere 6.x Physical Design&lt;/h4&gt;

&lt;p&gt;Skills and Abilities&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Based on business requirements, determine client access options in a vSphere solution.&lt;/li&gt;
  &lt;li&gt;Analyze business requirements when integrating vSphere with other VMware solutions.&lt;/li&gt;
  &lt;li&gt;Evaluate the impact of the VMware Certificate Authority and the VMware Endpoint Certificate Store to the design.&lt;/li&gt;
  &lt;li&gt;Based on the logical design and given functional requirements:&lt;/li&gt;
  &lt;li&gt;Determine the most appropriate datacenter management options for the design.&lt;/li&gt;
  &lt;li&gt;Implement the service based on the required infrastructure qualities.&lt;/li&gt;
  &lt;li&gt;Analyze cluster requirements:&lt;/li&gt;
  &lt;li&gt;Availability requirements for HA and FT&lt;/li&gt;
  &lt;li&gt;Performance requirements for DRS and vMotion&lt;/li&gt;
  &lt;li&gt;Storage performance requirements for SDRS and Storage vMotion&lt;/li&gt;
  &lt;li&gt;Determine appropriate vCenter Server design and sizing requirements:&lt;/li&gt;
  &lt;li&gt;vCenter Server Enhanced Linked Mode&lt;/li&gt;
  &lt;li&gt;vCenter Server virtual appliance vs vCenter Server for Windows&lt;/li&gt;
  &lt;li&gt;Platform Services Controller&lt;/li&gt;
  &lt;li&gt;Evaluate access control methodologies for creating roles and assignment of users to roles.&lt;/li&gt;
  &lt;li&gt;Determine proper structure for access control settings (i.e. folders, resource pools, etc.)&lt;/li&gt;
  &lt;li&gt;Develop appropriate host and virtual machine deployment options.&lt;/li&gt;
  &lt;li&gt;Include in the design appropriate technologies for:&lt;/li&gt;
  &lt;li&gt;Asset management&lt;/li&gt;
  &lt;li&gt;Event, incident and problem management&lt;/li&gt;
  &lt;li&gt;Logging, monitoring and reporting&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Tools&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://pubs.vmware.com/vsphere-60/topic/com.vmware.ICbase/PDF/vsphere-esxi-vcenter-server-60-monitoring-performance-guide.pdf&quot;&gt;vSphere Monitoring and Performance Guide&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.vmware.com/files/pdf/techpaper/VMware-vCenter-Server-6-0-Availability-Guide.pdf&quot;&gt;VMware vCenter Server 6.0 Availability Guide&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://pubs.vmware.com/vsphere-60/topic/com.vmware.ICbase/PDF/vsphere-esxi-vcenter-server-60-host-management-guide.pdf&quot;&gt;vCenter Server and Host Management Guide&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://pubs.vmware.com/vsphere-60/topic/com.vmware.ICbase/PDF/vsphere-update-manager-60-install-administration-guide.pdf&quot;&gt;VMware vCenter Update Manager 6.0 Performance and Best Practices&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.vmware.com/files/pdf/techpaper/vmware-vcenter-server6-deployment-guide.pdf&quot;&gt;vCenter Server Deployment Guide&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.vmware.com/resources/compatibility/sim/interop_matrix.php&quot;&gt;VMware Interoperability Matrix&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.vmware.com/files/pdf/services/VMware-Proactive-Incident-Whitepaper.pdf&quot;&gt;VMware Proactive Incident Whitepaper&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

    &lt;p&gt;&lt;a href=&quot;/certification/vmware-certified-advanced-professional-6-data-center-virtualization-design-guide-3v0-622/&quot;&gt;VMware Certified Advanced Professional 6 – Data Center Virtualization Design Guide (3V0 622)&lt;/a&gt; was originally published by David Stamen at &lt;a href=&quot;&quot;&gt;davidstamen.com&lt;/a&gt; on July 25, 2016.&lt;/p&gt;
  </content>
</entry>


<entry>
  <title type="html"><![CDATA[My VCAP6 DCV Deploy Beta Experience]]></title>
  <link rel="alternate" type="text/html" href="/certification/my-vcap6-dcv-deploy-beta-experience/" />
  <id>/certification/my-vcap6-dcv-deploy-beta-experience</id>
  <published>2016-06-24T00:00:00-04:00</published>
  <updated>2016-06-24T00:00:00-04:00</updated>
  <author>
    <name>David Stamen</name>
    <uri></uri>
    <email>dstamen@gmail.com</email>
  </author>
  <content type="html">
    &lt;p&gt;Today I took my VCAP6-DCV exam. This exam was announced with a two week availability in the US priced at $100.&lt;/p&gt;

&lt;p&gt;My experience with the exam was actually pretty good. The new interface for the advanced exams is that of an HOL. You are dropped onto the desktop and have a window that slides in and out to pull up the manual and other consoles.&lt;/p&gt;

&lt;p&gt;I would definately read up on Josh Andrew’s &lt;a href=&quot;http://sostechblog.com/2016/06/15/vcap6-dcv-deploy-public-beta-launched/&quot;&gt;post&lt;/a&gt; about what to expect.&lt;/p&gt;

&lt;p&gt;I would also recommend going over the &lt;a href=&quot;https://mylearn.vmware.com/lcms/web/portals/certification/VMware%20Certification%20Platform%20Interface.pdf&quot;&gt;interface guide&lt;/a&gt; as well as this has lots of detailed information about the console, and limitations about the control key, akt key and backspace key (I will expand on that more below). Also please make note of the sections about optimizing the console, this is also in the on screen manual, I tried to skip over it, but without following these steps alot of the screen will be cutoff, go ahead and do it. It will make it easier for you.&lt;/p&gt;

&lt;p&gt;The new interface is now HTML5 based and is extremely quick, in my testing center i did not experience any of the lag I did when i took the VCAP5.&lt;/p&gt;

&lt;p&gt;However there are a few things to make note of when taking try new exam. The following keys are disabled… Ctrl, alt and backspace. This made a few tasks difficult I knew about ctrl going into the exam, but not having backspace at my disposal made a few things harder. The delete key is still active so at least you can clear some of the text you typed incorrectly.&lt;/p&gt;

&lt;p&gt;one thing to add, there may not be a copy padte in all places but if you need to “copy” something from the manual you can highlight it and then drag it to a field in the console and it will “paste” thr content there.&lt;/p&gt;

&lt;p&gt;As far as content, I think it was very good. I didn’t feel strapped on time and it was one of the better beta exam experiences I have had. I definitely recommend taking it if you can.&lt;/p&gt;

&lt;p&gt;The exam never strayed off the blueprint, so If you are looking for something to study I would definitely make sure you cover all topics on the blueprint, it will help you in the long run.&lt;/p&gt;

&lt;p&gt;Some of the resources I used to study were the following.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;VMware Official Blueprint
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;https://mylearn.vmware.com/mgrReg/plan.cfm?plan=88753&amp;amp;ui=www_cert&quot;&gt;https://mylearn.vmware.com/mgrReg/plan.cfm?plan=88753&amp;amp;ui=www_cert&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;vJenner Blog
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;http://www.vjenner.com/vcap6-dcv-deployment-study-guide/&quot;&gt;http://www.vjenner.com/vcap6-dcv-deployment-study-guide/&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;vPentathlon
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;http://vpentathlon.com/vcap-dcv-deploy-study-guide/&quot;&gt;http://vpentathlon.com/vcap-dcv-deploy-study-guide/&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Google Community for VCAP6-DCV
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;https://plus.google.com/communities/108002000588564278612&quot;&gt;https://plus.google.com/communities/108002000588564278612&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Tom Greene (This was really great to focus on where to study, it covers differences between VCAP5 and VCAP6)
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;http://www.thomgreene.com/blog/2016/6/16/vcap6-dcv-deploy-blueprint-changes-from-vcap5-dca&quot;&gt;http://www.thomgreene.com/blog/2016/6/16/vcap6-dcv-deploy-blueprint-changes-from-vcap5-dca&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;VMware HOL’s
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;http://labs.hol.vmware.com/HOL/catalogs/lab/2112&quot;&gt;HOL-SDC-1627&lt;/a&gt; - VVol, Virtual SAN &amp;amp; Storage Policy-Based Management. I think I spent the MOST time in this lab, it is a great lab that has VDP, VR, VSAN, VVOL and pretty much anything you need. I probably enrolled in this lab over 15 times.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;Update 6/27&lt;/strong&gt;
Please make sure to check out Beta experience’s as well!&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Ariel Sanchez
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;https://sites.google.com/site/arielsanchezmora/home/study-guides/vcap6-dcv-deploy-beta&quot;&gt;https://sites.google.com/site/arielsanchezmora/home/study-guides/vcap6-dcv-deploy-beta&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

    &lt;p&gt;&lt;a href=&quot;/certification/my-vcap6-dcv-deploy-beta-experience/&quot;&gt;My VCAP6 DCV Deploy Beta Experience&lt;/a&gt; was originally published by David Stamen at &lt;a href=&quot;&quot;&gt;davidstamen.com&lt;/a&gt; on June 24, 2016.&lt;/p&gt;
  </content>
</entry>


<entry>
  <title type="html"><![CDATA[Using PowerCLI to Get and Set DVS Traffic Shaping Settings]]></title>
  <link rel="alternate" type="text/html" href="/powercli/using-powercli-to-get-and-set-dvs-traffic-shaping-settings/" />
  <id>/powercli/using-powercli-to-get-and-set-dvs-traffic-shaping-settings</id>
  <published>2016-04-21T00:00:00-04:00</published>
  <updated>2016-04-21T00:00:00-04:00</updated>
  <author>
    <name>David Stamen</name>
    <uri></uri>
    <email>dstamen@gmail.com</email>
  </author>
  <content type="html">
    &lt;p&gt;I have been in process in configuring traffic shaping for multiple port groups. It seems with PowerCLI 6.3 R1 there are no native Powershell Cmdlets. Luckily I stumbled across &lt;a href=&quot;http://www.lucd.info/2011/06/11/dvswitch-scripting-part-9-traffic-shaping/&quot;&gt;@Lucd&lt;/a&gt; and his PowerCLI functions to manage these settings, i have put these into a script to mass get and set the settings for all port groups of a DVS’s.&lt;/p&gt;

&lt;h4 id=&quot;pre-requsites&quot;&gt;&lt;strong&gt;&lt;em&gt;Pre-Requsites&lt;/em&gt;&lt;/strong&gt;&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.vmware.com/support/developer/PowerCLI/&quot;&gt;VMware PowerCLI&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;link-to-script&quot;&gt;&lt;strong&gt;&lt;em&gt;Link to Script&lt;/em&gt;&lt;/strong&gt;&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/dstamen/PowerCLI/blob/master/Get-VMwareTrafficShapingSettings.ps1&quot;&gt;Get-VMwareTrafficShapingSettings.ps1&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/dstamen/PowerCLI/blob/master/Set-VMwareTrafficShapingSettings.ps1&quot;&gt;Set-VMwareTrafficShapingSettings.ps1&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;preparing-to-execute-the-script&quot;&gt;&lt;strong&gt;&lt;em&gt;Preparing to Execute the Script&lt;/em&gt;&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;The script is pretty straight forward, just need to define a few variables seen below and then you execute the script. I will walk you through the process.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;This script assumes you have already launched PowerCLI and modified the variables&lt;/em&gt;&lt;/p&gt;

&lt;h4 id=&quot;get-traffic-shaping-settings&quot;&gt;&lt;strong&gt;&lt;em&gt;Get Traffic Shaping Settings&lt;/em&gt;&lt;/strong&gt;&lt;/h4&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;Foreach&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$VirtualSwitch&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;Get-VirtualSwitch -Distributed&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;Foreach&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$VirtualPortGroup&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;Get-VirtualPortGroup -VirtualSwitch &lt;span class=&quot;nv&quot;&gt;$VirtualSwitch&lt;/span&gt;|Where &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$_&lt;/span&gt;.Name -notlike &lt;span class=&quot;s2&quot;&gt;&quot;*DVUplinks*&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;})&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;Write&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$VirtualPortGroup&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; on &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$VirtualSwitch&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
      &lt;span class=&quot;nv&quot;&gt;$dvPg&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; Get-dvSwPg -dvSw &lt;span class=&quot;nv&quot;&gt;$VirtualSwitch&lt;/span&gt;.ExtensionData -PGName &lt;span class=&quot;nv&quot;&gt;$VirtualPortGroup&lt;/span&gt;
      Get-dvPgTrafficShaping -dvPg &lt;span class=&quot;nv&quot;&gt;$dvPg&lt;/span&gt;|ft
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h4 id=&quot;set-traffic-shaping-settings&quot;&gt;&lt;strong&gt;&lt;em&gt;Set Traffic Shaping Settings&lt;/em&gt;&lt;/strong&gt;&lt;/h4&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;k&quot;&gt;Foreach&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$VirtualSwitch&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;Get-VirtualSwitch -Distributed&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;Foreach&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$VirtualPortGroup&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;Get-VirtualPortGroup -VirtualSwitch &lt;span class=&quot;nv&quot;&gt;$VirtualSwitch&lt;/span&gt;|Where &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$_&lt;/span&gt;.Name -notlike &lt;span class=&quot;s2&quot;&gt;&quot;*DVUplinks*&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;})&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;Write&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$VirtualPortGroup&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; on &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$VirtualSwitch&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
      &lt;span class=&quot;nv&quot;&gt;$dvPg&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; Get-dvSwPg -dvSw &lt;span class=&quot;nv&quot;&gt;$VirtualSwitch&lt;/span&gt;.ExtensionData -PGName &lt;span class=&quot;nv&quot;&gt;$VirtualPortGroup&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;Set&lt;/span&gt;-dvPgTrafficShaping -dvPg &lt;span class=&quot;nv&quot;&gt;$dvPg&lt;/span&gt; -InShaping -inAverageKbps 10485760 -inBurstKB 102400 -inPeakKbps 10485760 -OutShaping -outAverageKbps 10485760 -outBurstKB 102400 -outPeakKbps 10485760
   &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h4 id=&quot;execute-the-script&quot;&gt;&lt;strong&gt;&lt;em&gt;Execute the Script&lt;/em&gt;&lt;/strong&gt;&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;Run .\Get-VMwareTrafficShapingSettings.ps1&lt;/li&gt;
  &lt;li&gt;Run .\Set-VMwareTrafficShapingSettings.ps1&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;screenshots&quot;&gt;&lt;strong&gt;&lt;em&gt;Screenshots&lt;/em&gt;&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;/images/trafficshaping1.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

    &lt;p&gt;&lt;a href=&quot;/powercli/using-powercli-to-get-and-set-dvs-traffic-shaping-settings/&quot;&gt;Using PowerCLI to Get and Set DVS Traffic Shaping Settings&lt;/a&gt; was originally published by David Stamen at &lt;a href=&quot;&quot;&gt;davidstamen.com&lt;/a&gt; on April 21, 2016.&lt;/p&gt;
  </content>
</entry>


<entry>
  <title type="html"><![CDATA[Using Veeam Powershell to Manage ReIP Rules]]></title>
  <link rel="alternate" type="text/html" href="/veeam/using-veeam-powershell-to-manage-reip-rules/" />
  <id>/veeam/using-veeam-powershell-to-manage-reip-rules</id>
  <published>2016-04-18T00:00:00-04:00</published>
  <updated>2016-04-18T00:00:00-04:00</updated>
  <author>
    <name>David Stamen</name>
    <uri></uri>
    <email>dstamen@gmail.com</email>
  </author>
  <content type="html">
    &lt;p&gt;Hello! Welcome to my First Veeam PowerShell Script! I have been working on tons of migrations using Veeam Backup and Replication and need to create re-ip rules to update the static IP assignments. Obviously the first rule of scripting if you do something more than once, automate! I was bad at this one, I originally tried and gave up so I did about 20 manually which started to become a huge headache.&lt;/p&gt;

&lt;p&gt;Thanks to  Marcus Puckett (@mpuckett259) he helped me on the side figure out the syntax to get the rule to append and not overwrite. See below for the script. Check out the Github for the bits!&lt;/p&gt;

&lt;h4 id=&quot;pre-requsites&quot;&gt;&lt;strong&gt;&lt;em&gt;Pre-Requsites&lt;/em&gt;&lt;/strong&gt;&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://helpcenter.veeam.com/backup/powershell/getting_started.html&quot;&gt;Veeam Powershell&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;link-to-script&quot;&gt;&lt;strong&gt;&lt;em&gt;Link to Script&lt;/em&gt;&lt;/strong&gt;&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/dstamen/Veeam/blob/master/Create-VeeamReIPRule.ps1&quot;&gt;Create-VeeamReIPRule.ps1&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/dstamen/Veeam/blob/master/ReIPRule-Template.csv&quot;&gt;ReIPRule-Template.csv&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;preparing-to-execute-the-script&quot;&gt;&lt;strong&gt;&lt;em&gt;Preparing to Execute the Script&lt;/em&gt;&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;The script is pretty straight forward, just update the CSV file and then you execute the script.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;#Define Variables&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;param&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;Parameter&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;Mandatory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$False&lt;/span&gt;,
        &lt;span class=&quot;nv&quot;&gt;HelpMessage&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;Path to CSV to Import&#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)]&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[]]&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$csvlist&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;#Load Veeam Plugin&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;Add-PSSnapin&lt;/span&gt; -Name VeeamPSSnapIn -ErrorAction SilentlyContinue

&lt;span class=&quot;c1&quot;&gt;#Check if CSV was specified, if not prompt.&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;If&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$csvlist&lt;/span&gt; -eq &lt;span class=&quot;nv&quot;&gt;$NULL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;$csvlist&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Read-host&lt;/span&gt; -Prompt &lt;span class=&quot;s2&quot;&gt;&quot;Csv to import&quot;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;If&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;Test-Path&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$csvlist&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; -eq &lt;span class=&quot;nv&quot;&gt;$False&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;Write-host&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Could not find CSV.&quot;&lt;/span&gt;;&lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;#Import CSV&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$iplist&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Import-csv&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$csvlist&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;#Cycle through each row and add in the ReIP Rule&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;Foreach&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$item&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$iplist&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nv&quot;&gt;$Description&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$item&lt;/span&gt;.Description
  &lt;span class=&quot;nv&quot;&gt;$Job&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$item&lt;/span&gt;.Job
  &lt;span class=&quot;nv&quot;&gt;$SourceIp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$item&lt;/span&gt;.SourceIp
  &lt;span class=&quot;nv&quot;&gt;$SourceMask&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$item&lt;/span&gt;.SourceMask
  &lt;span class=&quot;nv&quot;&gt;$TargetIp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$item&lt;/span&gt;.TargetIp
  &lt;span class=&quot;nv&quot;&gt;$TargetMask&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$item&lt;/span&gt;.TargetMask
  &lt;span class=&quot;nv&quot;&gt;$TargetGateway&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$item&lt;/span&gt;.TargetGateway
  &lt;span class=&quot;nv&quot;&gt;$DNS1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$item&lt;/span&gt;.DNS1
  &lt;span class=&quot;nv&quot;&gt;$DNS2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$item&lt;/span&gt;.DNS2

  &lt;span class=&quot;nv&quot;&gt;$currentiprules&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; Get-VBRJob -Name &lt;span class=&quot;nv&quot;&gt;$Job&lt;/span&gt; | Get-VBRViReplicaReIpRule
  &lt;span class=&quot;nv&quot;&gt;$newiprule&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; New-VBRViReplicaReIpRule -SourceIp &lt;span class=&quot;nv&quot;&gt;$SourceIp&lt;/span&gt; -SourceMask &lt;span class=&quot;nv&quot;&gt;$SourceMask&lt;/span&gt; -TargetIp &lt;span class=&quot;nv&quot;&gt;$TargetIp&lt;/span&gt; -TargetMask &lt;span class=&quot;nv&quot;&gt;$TargetMask&lt;/span&gt; -TargetGateway &lt;span class=&quot;nv&quot;&gt;$TargetGateway&lt;/span&gt; -DNS &lt;span class=&quot;nv&quot;&gt;$DNS1&lt;/span&gt;,&lt;span class=&quot;nv&quot;&gt;$DNS2&lt;/span&gt; -Description &lt;span class=&quot;nv&quot;&gt;$Description&lt;/span&gt;
  &lt;span class=&quot;nv&quot;&gt;$newrules&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; @&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$currentiprules&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; + @&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$newiprule&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;nv&quot;&gt;$replicajob&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; Get-VBRJob -Name &lt;span class=&quot;nv&quot;&gt;$Job&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;Set&lt;/span&gt;-VBRViReplicaJob -Job &lt;span class=&quot;nv&quot;&gt;$replicajob&lt;/span&gt; -EnableReIp -ReIpRule &lt;span class=&quot;nv&quot;&gt;$newrules&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h4 id=&quot;execute-the-script&quot;&gt;&lt;strong&gt;&lt;em&gt;Execute the Script&lt;/em&gt;&lt;/strong&gt;&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;Run .\Create-VeeamReIPRule.ps1 pathto.csv&lt;/li&gt;
&lt;/ul&gt;

    &lt;p&gt;&lt;a href=&quot;/veeam/using-veeam-powershell-to-manage-reip-rules/&quot;&gt;Using Veeam Powershell to Manage ReIP Rules&lt;/a&gt; was originally published by David Stamen at &lt;a href=&quot;&quot;&gt;davidstamen.com&lt;/a&gt; on April 18, 2016.&lt;/p&gt;
  </content>
</entry>


<entry>
  <title type="html"><![CDATA[Troubleshooting Cisco ENIC and FNIC Drivers with VMware Update Manager 6.x]]></title>
  <link rel="alternate" type="text/html" href="/vmware/cisco/troubleshooting-cisco-enic-and-fnic-drivers-with-vmware-update-manager-6x/" />
  <id>/vmware/cisco/troubleshooting-cisco-enic-and-fnic-drivers-with-vmware-update-manager-6x</id>
  <published>2016-04-08T00:00:00-04:00</published>
  <updated>2016-04-08T00:00:00-04:00</updated>
  <author>
    <name>David Stamen</name>
    <uri></uri>
    <email>dstamen@gmail.com</email>
  </author>
  <content type="html">
    &lt;p&gt;I have been having issues ever since I updated to vSphere 6.x getting the Cisco Drivers to properly update through VMware Update Manager(VUM). Every time I would run through a compliance check, they would always report they were up to date even when they were running an older version.&lt;/p&gt;

&lt;p&gt;I have recently made a breakthrough working with VMware Support and stumbling through some old blogs. Cisco Support has been terrible on this issue and after repeated attempts to get this case escalated i think the 10th time is a charm.&lt;/p&gt;

&lt;p&gt;From what I have found the issue lies in the metadata of the offline bundle. As you can see in the below screenshot. The ENIC driver is showing 6.x but the FNIC driver is showing 5.x. In this case the ENIC driver works and the FNIC driver does not.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Note: The ENIC driver for 2.3.0.7 was recently updated to fix this, but every other driver is currently broken.&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/vummetadata.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;To update the metadata of the offline bundle and get VUM to work you need to perform the following steps.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Make sure you have 7zip and setup an editor within 7zip. I used notepad++.&lt;/p&gt;

    &lt;p&gt;&lt;img src=&quot;/images/7zipeditor.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;Open the offline_bundle zip file&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Edit the vendor-index.xml file and replace the &lt;strong&gt;5&lt;/strong&gt; with &lt;strong&gt;6&lt;/strong&gt;&lt;/p&gt;

    &lt;p&gt;&lt;img src=&quot;/images/vendorindexxml.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;Open up the metadata.zip file&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Edit the vendor-index.xml file and replace the &lt;strong&gt;5&lt;/strong&gt; with &lt;strong&gt;6&lt;/strong&gt;&lt;/p&gt;

    &lt;p&gt;&lt;img src=&quot;/images/vendorindexxml.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Edit the vmware.xml file and replace the &lt;strong&gt;5&lt;/strong&gt; with &lt;strong&gt;6&lt;/strong&gt;&lt;/p&gt;

    &lt;p&gt;&lt;img src=&quot;/images/vmwarexml.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;If you perform these steps, you can now import your customized offline bundle and it will accurately report 6.x in VUM and allow you to remediate your hosts. Please post any feedback below!&lt;/p&gt;

    &lt;p&gt;&lt;a href=&quot;/vmware/cisco/troubleshooting-cisco-enic-and-fnic-drivers-with-vmware-update-manager-6x/&quot;&gt;Troubleshooting Cisco ENIC and FNIC Drivers with VMware Update Manager 6.x&lt;/a&gt; was originally published by David Stamen at &lt;a href=&quot;&quot;&gt;davidstamen.com&lt;/a&gt; on April 08, 2016.&lt;/p&gt;
  </content>
</entry>


<entry>
  <title type="html"><![CDATA[Using UCS PowerTool to Configure Syslog Servers]]></title>
  <link rel="alternate" type="text/html" href="/cisco/using-ucs-powertool-to-configure-syslog-servers/" />
  <id>/cisco/using-ucs-powertool-to-configure-syslog-servers</id>
  <published>2016-03-14T00:00:00-04:00</published>
  <updated>2016-03-14T00:00:00-04:00</updated>
  <author>
    <name>David Stamen</name>
    <uri></uri>
    <email>dstamen@gmail.com</email>
  </author>
  <content type="html">
    &lt;p&gt;Time for more UCS Scripting! This time to configure Syslog. The script is pretty straightforward, but nice to have to easily set up Syslog across multiple UCS domains.&lt;/p&gt;

&lt;h4 id=&quot;pre-requsites&quot;&gt;&lt;strong&gt;&lt;em&gt;Pre-Requsites&lt;/em&gt;&lt;/strong&gt;&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://communities.cisco.com/docs/DOC-53838&quot;&gt;UCS Powertool&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;link-to-script&quot;&gt;&lt;strong&gt;&lt;em&gt;Link to Script&lt;/em&gt;&lt;/strong&gt;&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/dstamen/UCS-PowerTool/blob/master/Set-UCSSyslog.ps1&quot;&gt;Set-UcsSyslog.ps1&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;preparing-to-execute-the-script&quot;&gt;&lt;strong&gt;&lt;em&gt;Preparing to Execute the Script&lt;/em&gt;&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;The script is pretty straight forward, just need to define a few variables seen below and then you execute the script. I will walk you through the process.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# UCS PowerTool Script that to set Syslog&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# @davidstamen&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# http://davidstamen.com&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;#Define Variables&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$cred&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Get-Credential&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$domains&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;ucs01.lab.local&quot;&lt;/span&gt;,&lt;span class=&quot;s2&quot;&gt;&quot;ucs02.lab.local&quot;&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$SyslogServer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;syslog.lab.local&quot;&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$Name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;primary&quot;&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$Facility&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;local7&quot;&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$AdminState&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;enabled&quot;&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$Severity&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;notifications&quot;&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;#Cycles through each UCS setting values&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;Foreach&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$ucs&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$domains&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  Connect-UCS &lt;span class=&quot;nv&quot;&gt;$ucs&lt;/span&gt; -Credential &lt;span class=&quot;nv&quot;&gt;$cred&lt;/span&gt;
  Get-UcsSyslogClient -Name &lt;span class=&quot;nv&quot;&gt;$Name&lt;/span&gt; | &lt;span class=&quot;nb&quot;&gt;Set&lt;/span&gt;-UcsSyslogClient -AdminState &lt;span class=&quot;nv&quot;&gt;$AdminState&lt;/span&gt; -ForwardingFacility &lt;span class=&quot;nv&quot;&gt;$Facility&lt;/span&gt; -Hostname &lt;span class=&quot;nv&quot;&gt;$SyslogServer&lt;/span&gt; -Severity &lt;span class=&quot;nv&quot;&gt;$Severity&lt;/span&gt; -Force
  Disconnect-UCS
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h4 id=&quot;execute-the-script&quot;&gt;&lt;strong&gt;&lt;em&gt;Execute the Script&lt;/em&gt;&lt;/strong&gt;&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;Run .\Set-UcsSyslog.ps1&lt;/li&gt;
&lt;/ul&gt;

    &lt;p&gt;&lt;a href=&quot;/cisco/using-ucs-powertool-to-configure-syslog-servers/&quot;&gt;Using UCS PowerTool to Configure Syslog Servers&lt;/a&gt; was originally published by David Stamen at &lt;a href=&quot;&quot;&gt;davidstamen.com&lt;/a&gt; on March 14, 2016.&lt;/p&gt;
  </content>
</entry>


<entry>
  <title type="html"><![CDATA[Using PureStorage Powershell to Configure SysLog Servers]]></title>
  <link rel="alternate" type="text/html" href="/purestorage/using-purestorage-powershell-to-configure-syslog-servers/" />
  <id>/purestorage/using-purestorage-powershell-to-configure-syslog-servers</id>
  <published>2016-03-14T00:00:00-04:00</published>
  <updated>2016-03-14T00:00:00-04:00</updated>
  <author>
    <name>David Stamen</name>
    <uri></uri>
    <email>dstamen@gmail.com</email>
  </author>
  <content type="html">
    &lt;p&gt;Currently working on the final steps of getting our new equipment configured. The next step was to configure Syslog on all of our Pure Arrays. Another reason to script this task! Easily populate your arrays and server and at the click of a button you can configure all your arrays easily.&lt;/p&gt;

&lt;h4 id=&quot;pre-requsites&quot;&gt;&lt;strong&gt;&lt;em&gt;Pre-Requsites&lt;/em&gt;&lt;/strong&gt;&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://blog.purestorage.com/announcing-the-new-pure-storage-powershell-sdk/&quot;&gt;PureStorage Powershell SDK&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;link-to-script&quot;&gt;&lt;strong&gt;&lt;em&gt;Link to Script&lt;/em&gt;&lt;/strong&gt;&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/dstamen/PureStorage/blob/master/Set-PureStorageSyslog.ps1&quot;&gt;Set-PureStorageSyslog.ps1&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;preparing-to-execute-the-script&quot;&gt;&lt;strong&gt;&lt;em&gt;Preparing to Execute the Script&lt;/em&gt;&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;The script is pretty straight forward, just need to define a few variables seen below and then you execute the script. I will walk you through the process.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;#Import Module&lt;/span&gt;
Import-Module PureStoragePowershellSDK

&lt;span class=&quot;c1&quot;&gt;#Define Variables&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$cred&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Get-Credential&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$arrays&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;pure.lab.local&quot;&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$SysLogServers&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;tcp://syslog.lab.local:514&quot;&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;#Cycles through each UCS setting values&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;Foreach&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$array&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$arrays&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;Write-Host&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Setting Syslog Information for &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$array&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
  &lt;span class=&quot;nv&quot;&gt;$FlashArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; New-PfaArray -EndPoint &lt;span class=&quot;nv&quot;&gt;$array&lt;/span&gt; -Credentials &lt;span class=&quot;nv&quot;&gt;$cred&lt;/span&gt; -IgnoreCertificateError
  &lt;span class=&quot;nb&quot;&gt;Set&lt;/span&gt;-PfaSyslogServers -Array &lt;span class=&quot;nv&quot;&gt;$FlashArray&lt;/span&gt; -SyslogServers &lt;span class=&quot;nv&quot;&gt;$SyslogServers&lt;/span&gt;|fl
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h4 id=&quot;execute-the-script&quot;&gt;&lt;strong&gt;&lt;em&gt;Execute the Script&lt;/em&gt;&lt;/strong&gt;&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;Run .\Set-PureStorageSyslog.ps1&lt;/li&gt;
&lt;/ul&gt;

    &lt;p&gt;&lt;a href=&quot;/purestorage/using-purestorage-powershell-to-configure-syslog-servers/&quot;&gt;Using PureStorage Powershell to Configure SysLog Servers&lt;/a&gt; was originally published by David Stamen at &lt;a href=&quot;&quot;&gt;davidstamen.com&lt;/a&gt; on March 14, 2016.&lt;/p&gt;
  </content>
</entry>

</feed>
