<!doctype html><!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7"><![endif]--><!--[if IE 7]><html class="no-js lt-ie9 lt-ie8"><![endif]--><!--[if IE 8]><html class="no-js lt-ie9"><![endif]--><!--[if gt IE 8]><!--><html class=no-js><!--<![endif]--><head><meta charset=utf-8><title>PowerCLI &#183; davidstamen.com</title><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta property="og:type" content="website"><link rel=canonical href=https://davidstamen.com/tags/powercli/><link rel=apple-touch-icon-precomposed sizes=144x144 href=/touch-icon-144-precomposed.png><link rel=icon href=/favicon/favicon.ico><script async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><script>(adsbygoogle=window.adsbygoogle||[]).push({google_ad_client:"ca-pub-6907288179836979",enable_page_level_ads:true});</script><!--[if lt IE 9]><script src=https://oss.maxcdn.com/libs/html5shiv/3.7.2/html5shiv.js></script><script src=https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js></script><![endif]--><script src=/js/clr-3.0/clr-icons.min.js></script><script src=/js/clr-3.0/custom-elements.min.js></script><link href=/css/clr-3.0/clr-ui.css rel=stylesheet><link href=/css/clr-3.0/clr-icons.min.css rel=stylesheet><link href=/css/custom.css rel=stylesheet><link rel=stylesheet href=/css/all.css></head><body data-ng-app=myapp data-ng-controller=MyController data-ng-mouseleave=MouseLeave($event)><div class=main-container><header class=header-2><div class=branding><a class=navbar-brand-img href=/><img alt src>
<span class=title>davidstamen.com</span></a></div><div class=header-nav [clr-nav-level]=1><a class="nav-link nav-text" href=https://davidstamen.com/ title=Home>Home</a>
<a class="nav-link nav-text" href=https://davidstamen.com/categories/pure-storage/ title="Pure Storage">Pure Storage</a>
<a class="nav-link nav-text" href=https://davidstamen.com/categories/vmware/ title=VMware>VMware</a>
<a class="nav-link nav-text" href=https://davidstamen.com/tags/ title=Tags>Tags</a>
<a class="nav-link nav-text" href=https://davidstamen.com/series/ title=Series>Series</a>
<a class="nav-link nav-text" href=https://www.youracclaim.com/users/davidstamen title=Acclaim>Acclaim</a>
<a class="nav-link nav-text" href=https://davidstamen.com/about title=About>About</a></div><div class=header-actions><form class=search id=search method=get action=//google.com/search><label for=search_input><input id=search_input type=text name=q placeholder=Search>
<input type=hidden name=as_sitesearch value=davidstamen.com></label></form></div></header><div class=content-container><div class=content-area><h1>PowerCLI</h1><div class=clr-row><div class=clr-col-12><div class=card><div class=card-header><a href=https://davidstamen.com/using-veba-to-expand-pure-datastore/>Using the VMware Event Broker Appliance to Automatically Expand a Pure Storage FlashArray Datastore</a></div><div class=card-block><div class=card-media-block><div class="card-media-desciption clr-card-authors"><span class="card-media-title clr-card-authors"><div class=clr-card-authors>Published on
June 24, 2020 under <a href=/categories/vmware>VMware</a> and <a href=/categories/pure-storage>Pure Storage</a></div></span></div></div></div><div class=card-block><div class=card-text style=max-height:100px;min-height:100px;overflow:hidden><img src=/featured/veba.png class=clr-card-featured-image>
Something we get asked quite often it seems here at Pure Storage, is can we automatically expand a datastore when it gets full? The answer is yes! With all of the integrations with automation platformsm, Pure Storage Arrays have many options. This blog will cover how to handle this with the VMware Event Broker Appliance (VEBA)!</div></div><div class=card-footer>Tagged <a href=/tags/veba>VEBA</a>, <a href=/tags/vmware-event-broker-appliance>VMware Event Broker Appliance</a>, <a href=/tags/powercli>PowerCLI</a>, <a href=/tags/vsphere>vSphere</a>, <a href=/tags/flasharray>FlashArray</a> and <a href=/tags/powershell>Powershell</a></div></div></div><div class=clr-col-12><div class=card><div class=card-header><a href=https://davidstamen.com/2020/06/22/updating-the-vcenter-server-appliance-vcsa-with-powercli-revisited/>Updating the vCenter Server Appliance (VCSA) with PowerCLI - Revisited</a></div><div class=card-block><div class=card-media-block><div class="card-media-desciption clr-card-authors"><span class="card-media-title clr-card-authors"><div class=clr-card-authors>Published on
June 22, 2020 under <a href=/categories/vmware>VMware</a></div></span></div></div></div><div class=card-block><div class=card-text style=max-height:100px;min-height:100px;overflow:hidden><img src=/featured/powercli.png class=clr-card-featured-image>
In previous blogs, I covered how to update your VCSA using PowerCLI and with Postman. I also had multiple code sessions at VMworld 2019 where I got great feedback on the module. It’s been a while since I have looked at the module, and time has passed so I thought it was due for an update. The module will no longer need to be manually imported, it is now located in the Powershell Gallery!</div></div><div class=card-footer>Tagged <a href=/tags/powercli>PowerCLI</a>, <a href=/tags/vsphere-6.7>vSphere 6.7</a>, <a href=/tags/rest-api>REST API</a>, <a href=/tags/vcenter-server>vCenter Server</a>, <a href=/tags/vsphere-7.0>vSphere 7.0</a>, <a href=/tags/powershell>Powershell</a> and <a href=/tags/vsphere>vSphere</a></div></div></div><div class=clr-col-12><div class=card><div class=card-header><a href=https://davidstamen.com/2020/04/16/using-powercli-to-deploy-the-site-recovery-manager-8.3-appliance/>Using PowerCLI to Deploy the Site Recovery Manager 8.3 Appliance</a></div><div class=card-block><div class=card-media-block><div class="card-media-desciption clr-card-authors"><span class="card-media-title clr-card-authors"><div class=clr-card-authors>Published on
April 16, 2020 under <a href=/categories/automation>Automation</a> and <a href=/categories/vmware>VMware</a></div></span></div></div></div><div class=card-block><div class=card-text style=max-height:100px;min-height:100px;overflow:hidden><img src=/featured/srm.png class=clr-card-featured-image>
My latest project was to rebuild one of my labs to run vSphere 7 and Site Recovery Manager 8.3. In my current role I am constantly am deploying new lab environments for certain demos. If i can avoid using a manual process for it I will, in this case I am showing how you can deploy the SRM OVF using PowerCLI.
Pre-Requsites VMware PowerCLI Link to Script deploy-srm83.</div></div><div class=card-footer>Tagged <a href=/tags/powercli>PowerCLI</a> and <a href=/tags/site-recovery-manager>Site Recovery Manager</a></div></div></div><div class=clr-col-12><div class=card><div class=card-header><a href=https://davidstamen.com/2020/03/26/glad-to-be-part-of-the-inaugural-vmwarecode-coach-program/>Glad to be part of the Inaugural VMware{code} Coach Program</a></div><div class=card-block><div class=card-media-block><div class="card-media-desciption clr-card-authors"><span class="card-media-title clr-card-authors"><div class=clr-card-authors>Published on
March 26, 2020 under <a href=/categories/awards>Awards</a> and <a href=/categories/vmware-code>VMware Code</a></div></span></div></div></div><div class=card-block><div class=card-text style=max-height:100px;min-height:100px;overflow:hidden><img src=/featured/vmwarecode.png class=clr-card-featured-image>
VMware has been working on building an influencer program for the VMware{code} community for sometime. I am proud to announce I am one of the inaugural coaches for 2020!</div></div><div class=card-footer>Tagged <a href=/tags/code-coach>Code Coach</a>, <a href=/tags/powercli>PowerCLI</a>, <a href=/tags/api>API</a> and <a href=/tags/vmware-code>VMware Code</a></div></div></div><div class=clr-col-12><div class=card><div class=card-header><a href=https://davidstamen.com/2020/03/03/installing-and-updating-the-pure-storage-vsphere-plugin/>Installing and Updating the Pure Storage vSphere Plugin</a></div><div class=card-block><div class=card-media-block><div class="card-media-desciption clr-card-authors"><span class="card-media-title clr-card-authors"><div class=clr-card-authors>Published on
March 3, 2020 under <a href=/categories/pure-storage>Pure Storage</a> and <a href=/categories/vmware>VMware</a></div></span></div></div></div><div class=card-block><div class=card-text style=max-height:100px;min-height:100px;overflow:hidden><img src=/featured/purestorage.png class=clr-card-featured-image>
Welcome to the first of many Pure Storage blogs. As I get ramped up with the latest information I plan to do a series of getting started with Pure Storage features. These blogs will cover things such as the vSphere Client (HTML5) Plugin, FlashArray, FlashBlade and integrations with other VMware products. First up is learning to install and update the Pure Storage vSphere Client Plugin.</div></div><div class=card-footer>Tagged <a href=/tags/vsphere-plugin>vSphere Plugin</a>, <a href=/tags/vcenter-server>vCenter Server</a>, <a href=/tags/powercli>PowerCLI</a> and <a href=/tags/powershell>Powershell</a></div></div></div><div class=clr-col-12><div class=card><div class=card-header><a href=https://davidstamen.com/2019/01/31/patching-the-vcenter-server-appliance-vcsa-using-the-rest-api-part-2-powershell-module/>Patching the vCenter Server Appliance (VCSA) using the REST API - Part 2 (PowerCLI Module)</a></div><div class=card-block><div class=card-media-block><div class="card-media-desciption clr-card-authors"><span class="card-media-title clr-card-authors"><div class=clr-card-authors>Published on
January 31, 2019 under <a href=/categories/vmware>VMware</a></div></span></div></div></div><div class=card-block><div class=card-text style=max-height:100px;min-height:100px;overflow:hidden><img src=/featured/powercli.png class=clr-card-featured-image>
Previously I covered how to use the VCSA Installer to do a scripted upgrade and then I covered Patching the vCenter Server Appliance (VCSA) using the REST API - Part 1 (Postman Collection) However, after learning recently how to call API’s from Powershell I thought to myself, why not write a Powershell Module for this?
Introduction Using tools such as Postman can make it utilizing API’s a bit easier, but you still need to be familiar with a separate tool or UI.</div></div><div class=card-footer>Tagged <a href=/tags/powercli>PowerCLI</a>, <a href=/tags/vsphere-6.7>vSphere 6.7"</a>, <a href=/tags/rest-api>REST API</a>, <a href=/tags/vcenter-server>vCenter Server</a>, <a href=/tags/vsphere-7.0>vSphere 7.0</a>, <a href=/tags/powershell>Powershell</a> and <a href=/tags/vsphere>vSphere</a></div></div></div><div class=clr-col-12><div class=card><div class=card-header><a href=https://davidstamen.com/2017/07/27/using-powercli-to-add-vrealize-operations-license-key/>Using PowerCLI to Add vRealize Operations License Key</a></div><div class=card-block><div class=card-media-block><div class="card-media-desciption clr-card-authors"><span class="card-media-title clr-card-authors"><div class=clr-card-authors>Published on
July 27, 2017 under <a href=/categories/vmware>VMware</a></div></span></div></div></div><div class=card-block><div class=card-text style=max-height:100px;min-height:100px;overflow:hidden><img src=/featured/powercli.png class=clr-card-featured-image>
I have been working on doing a vCenter Consolidation Project. This included migrating our systems to a new vRealize Operations Server. This particular one included 73 different vSOM keys, and as you may know there is currently no way to enter in multiple keys at a time. I reached out to Kyle Ruddy and he informed me there is an API to do this, and that started my adventure to get this working.</div></div><div class=card-footer>Tagged <a href=/tags/vrops>vROPS</a> and <a href=/tags/powercli>PowerCLI</a></div></div></div><div class=clr-col-12><div class=card><div class=card-header><a href=https://davidstamen.com/2017/04/17/using-powercli-to-set-vcenter-permissions-on-datacenter/>Using PowerCLI to Set vCenter Permissions on Datacenter</a></div><div class=card-block><div class=card-media-block><div class="card-media-desciption clr-card-authors"><span class="card-media-title clr-card-authors"><div class=clr-card-authors>Published on
April 17, 2017 under <a href=/categories/vmware>VMware</a></div></span></div></div></div><div class=card-block><div class=card-text style=max-height:100px;min-height:100px;overflow:hidden><img src=/featured/powercli.png class=clr-card-featured-image>
I have been working on doing a vCenter Consolidation Project. This has meant recreating multiple permissions groups. I couldnt find an easy way to apply permissions at a datacenter so I updated this script to be used.
Pre-Requsites VMware PowerCLI Link to Script Set-vCenterPermissions.ps1 permissions.csv Preparing to Execute the Script The script is pretty straight forward, just need to update columns in the CSV such as Datacenter, Group and Role.</div></div><div class=card-footer>Tagged <a href=/tags/powercli>PowerCLI</a> and <a href=/tags/vcenter-server>vCenter Server</a></div></div></div><div class=clr-col-12><div class=card><div class=card-header><a href=https://davidstamen.com/2016/04/21/using-powercli-to-get-and-set-dvs-traffic-shaping-settings/>Using PowerCLI to Get and Set DVS Traffic Shaping Settings</a></div><div class=card-block><div class=card-media-block><div class="card-media-desciption clr-card-authors"><span class="card-media-title clr-card-authors"><div class=clr-card-authors>Published on
April 21, 2016 under <a href=/categories/vmware>VMware</a></div></span></div></div></div><div class=card-block><div class=card-text style=max-height:100px;min-height:100px;overflow:hidden><img src=/featured/powercli.png class=clr-card-featured-image>
I have been in process in configuring traffic shaping for multiple port groups. It seems with PowerCLI 6.3 R1 there are no native Powershell Cmdlets. Luckily I stumbled across @Lucd and his PowerCLI functions to manage these settings, i have put these into a script to mass get and set the settings for all port groups of a DVS’s.
Pre-Requsites VMware PowerCLI Link to Script Get-VMwareTrafficShapingSettings.</div></div><div class=card-footer>Tagged <a href=/tags/powercli>PowerCLI</a> and <a href=/tags/networking>Networking</a></div></div></div><div class=clr-col-12><div class=card><div class=card-header><a href=https://davidstamen.com/2016/03/03/using-powercli-to-install-host-vibs/>Using PowerCLI to Install Host VIBs</a></div><div class=card-block><div class=card-media-block><div class="card-media-desciption clr-card-authors"><span class="card-media-title clr-card-authors"><div class=clr-card-authors>Published on
March 3, 2016 under <a href=/categories/vmware>VMware</a></div></span></div></div></div><div class=card-block><div class=card-text style=max-height:100px;min-height:100px;overflow:hidden><img src=/featured/powercli.png class=clr-card-featured-image>
So currently Cisco has an issue with installing their ENIC and FNIC VIBs through Update Manager for ESXi 6.x. Until that is resolved I need to manually push out patches to these hosts. Obviously I do not want to do this manually, so I will be utilizing PowerCLI to accomplish this task.
Pre-Requsites VMware PowerCLI Link to Script Install-HostVIB.ps1 Preparing to Execute the Script The script is pretty straight forward, just need to define a few variables seen below and then you execute the script.</div></div><div class=card-footer>Tagged <a href=/tags/powercli>PowerCLI</a> and <a href=/tags/esxi>ESXi</a></div></div></div></div><nav><ul class=pagination><li class="pagination__item pagination__item--current"><a href=/tags/powercli/ class="btn btn-sm btn btn-primary">1</a></li><li class=pagination__item><a href=/tags/powercli/page/2/ class="btn btn-sm btn btn-outline">2</a></li><li class=pagination__item><a href=/tags/powercli/page/3/ class="btn btn-sm btn btn-outline">3</a></li><li class="pagination__item pagination__item--next"><a href=/tags/powercli/page/2/ class="btn btn-sm btn-outline">...</a></li><li class="pagination__item pagination__item--last"><a class="btn btn-sm btn btn-outline" href=/tags/powercli/page/3/>3</a></li></ul></nav></div><nav class="sidenav clr-col-2 clr-col-sm-12 clr-col-md-12 clr-col-lg-6 clr-col-xl-6"><section class=sidenav-content><div class=card><div class=card-block><div class=card-text id=site-intro><img src=/images/me2-300.png><p>a blog about virtualization, storage and stuff<ul class=nav-list-inline><a href=//github.com/dstamen target=_blank rel=noopener title=GitHub class="fab fa-github"></a><a href=//linkedin.com/in/davidstamen target=_blank rel=noopener title=LinkedIn class="fab fa-linkedin"></a><a href=//twitter.com/davidstamen target=_blank rel=noopener title=Twitter class="fab fa-twitter"></a><a href=mailto:dstamen@gmail.com target=_blank title=Email class="fas fa-envelope"></a><a href=/tags/powercli/index.xml type=application/rss+xml target=_blank title=RSS class="fas fa-rss"></a></ul></div></div></div><div class=card><div class=card-header><b>Latest Posts</b></div><div class=card-block><div class=card-text><ul class=list style=list-style-type:square;list-style-position:inherit><li><a class=nav-list href=https://davidstamen.com/using-veba-to-expand-pure-datastore/>Using the VMware Event Broker Appliance to Automatically Expand a Pure Storage FlashArray Datastore</a></li><li><a class=nav-list href=https://davidstamen.com/2020/06/22/updating-the-vcenter-server-appliance-vcsa-with-powercli-revisited/>Updating the vCenter Server Appliance (VCSA) with PowerCLI - Revisited</a></li><li><a class=nav-list href=https://davidstamen.com/2020/06/05/configuring-vrealize-orchestrator-to-use-pure1-integration/>Configuring vRealize Orchestrator to use Pure1 Integration</a></li><li><a class=nav-list href=https://davidstamen.com/2020/06/02/unable-to-provision-a-vvol-hard-disk-on-a-vm-located-on-vmfs-datastore/>Unable to Provision a vVol Hard Disk on a VM Located on VMFS Datastore</a></li><li><a class=nav-list href=https://davidstamen.com/updating-vk8s-supervisor-cluster/>Updating a vSphere with Kubernetes Supervisor Cluster</a></li><li><a class=nav-list href=https://davidstamen.com/2020/05/26/whats-new-in-the-4.3.1-pure-storage-vsphere-client-plugin/>What's New in the 4.3.1 Pure Storage vSphere Client Plugin</a></li><li><a class=nav-list href=https://davidstamen.com/deploying-tkc-on-vk8s-using-tkgcli/>Deploying Tanzu Kubernetes Clusters (TKC) on vSphere with Kubernetes using the TKG CLI</a></li><li><a class=nav-list href=https://davidstamen.com/running-vvol-on-vmc-on-cbs/>Running vVols in VMware Cloud on AWS (VMC) on Pure Storage Cloud Block Store (CBS) on AWS</a></li><li><a class=nav-list href=https://davidstamen.com/deploying-tkg-on-vmc/>Deploying Tanzu Kubernetes Grid (TKG) on VMware Cloud on AWS (VMC)</a></li><li><a class=nav-list href=https://davidstamen.com/deploying-tkg-on-vsphere/>Deploying Tanzu Kubernetes Grid (TKG) on vSphere</a></li></ul></div></div></div><div class=card><div class=card-header><b>Advertisements</b></div><div class=card-block><div class=card-text align=center><script async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><ins class=adsbygoogle style=display:inline-block;width:180px;height:150px data-ad-client=ca-pub-6907288179836979 data-ad-slot=6070718289></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div></div></div></section></nav></div></div></body></html>