<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Networking on davidstamen</title><link>https://davidstamen.com/tags/networking/</link><description>Recent content in Networking on davidstamen</description><generator>Hugo</generator><language>en</language><copyright>Copyright © 2008–2018, Steve Francia and the Hugo Authors; all rights reserved.</copyright><lastBuildDate>Mon, 08 Oct 2018 08:02:47 -0400</lastBuildDate><atom:link href="https://davidstamen.com/tags/networking/index.xml" rel="self" type="application/rss+xml"/><item><title>Automating the Upgrade of the Virtual Distributed Switch</title><link>https://davidstamen.com/2018/10/08/automating-the-upgrade-of-the-virtual-distributed-switch/</link><pubDate>Mon, 08 Oct 2018 08:02:47 -0400</pubDate><guid>https://davidstamen.com/2018/10/08/automating-the-upgrade-of-the-virtual-distributed-switch/</guid><description>&lt;p&gt;We are on the home stretch of our Automating your vSphere Upgrade blog series. The final step of completing our upgrade will be upgrading our Virtual Distributed Switch (VDS). When upgrading your VDS on vSphere 6.7 the version is actually 6.6 (we will cover the details later). Please make sure prior to upgrading your VDS to 6.6 all ESXi hosts have been upgraded to ESXi 6.7, if you still have hosts on ESXi 6.5 you will only be able to upgrade to version 6.5.&lt;/p&gt;</description></item><item><title>Configuring Unifi Controller and USG for L2TP VPN</title><link>https://davidstamen.com/2017/04/25/configuring-unifi-controller-and-usg-for-l2tp-vpn/</link><pubDate>Tue, 25 Apr 2017 00:00:00 +0000</pubDate><guid>https://davidstamen.com/2017/04/25/configuring-unifi-controller-and-usg-for-l2tp-vpn/</guid><description>&lt;p&gt;I have been waiting for native GUI support for L2TP vpn with local users and it is finally here! Ubiquiti Unifi Equipment now supports local radius auth using the 5.5.x code of controller! Please see below on how you can get this setup. For my example i will be using the Stable Candidate 5.5.11.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://community.ubnt.com/t5/UniFi-Updates-Blog/UniFi-5-5-11-Stable-Candidate-has-been-released/ba-p/1905832"&gt;Unifi Controller 5.5.11&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Configuration is quite simple! Just follow these few easy steps and you will be up in no time.&lt;/p&gt;</description></item><item><title>Installing Ubiquiti Unifi Controller</title><link>https://davidstamen.com/2016/12/02/installing-ubiquiti-unifi-controller/</link><pubDate>Fri, 02 Dec 2016 00:00:00 +0000</pubDate><guid>https://davidstamen.com/2016/12/02/installing-ubiquiti-unifi-controller/</guid><description>&lt;p&gt;I have been using Ubiquiti equipment for awhile at home and I figured i would finally write a blog post about it. Ubiquiti equipment is &amp;ldquo;enterprise class&amp;rdquo; equipment for the consumer.&lt;/p&gt;
&lt;p&gt;I figured I would create a post that goes over two ways of loading the controller. The first option will be installing it on Ubuntu on bare metal or a VM, the second option is a docker container.&lt;/p&gt;
&lt;p&gt;If you are installing this on a bare metal or virtual machine, i suggest a debian based image. My preference is Ubuntu.&lt;/p&gt;</description></item><item><title>Using PowerCLI to Get and Set DVS Traffic Shaping Settings</title><link>https://davidstamen.com/2016/04/21/using-powercli-to-get-and-set-dvs-traffic-shaping-settings/</link><pubDate>Thu, 21 Apr 2016 00:00:00 +0000</pubDate><guid>https://davidstamen.com/2016/04/21/using-powercli-to-get-and-set-dvs-traffic-shaping-settings/</guid><description>&lt;p&gt;I have been in process in configuring traffic shaping for multiple port groups. It seems with PowerCLI 6.3 R1 there are no native Powershell Cmdlets. Luckily I stumbled across &lt;a href="http://www.lucd.info/2011/06/11/dvswitch-scripting-part-9-traffic-shaping/"&gt;@Lucd&lt;/a&gt; and his PowerCLI functions to manage these settings, i have put these into a script to mass get and set the settings for all port groups of a DVS&amp;rsquo;s.&lt;/p&gt;
&lt;h4 id="pre-requsites"&gt;&lt;em&gt;&lt;strong&gt;Pre-Requsites&lt;/strong&gt;&lt;/em&gt;&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.vmware.com/support/developer/PowerCLI/"&gt;VMware PowerCLI&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="link-to-script"&gt;&lt;em&gt;&lt;strong&gt;Link to Script&lt;/strong&gt;&lt;/em&gt;&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/dstamen/PowerCLI/blob/master/Get-VMwareTrafficShapingSettings.ps1"&gt;Get-VMwareTrafficShapingSettings.ps1&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/dstamen/PowerCLI/blob/master/Set-VMwareTrafficShapingSettings.ps1"&gt;Set-VMwareTrafficShapingSettings.ps1&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="preparing-to-execute-the-script"&gt;&lt;em&gt;&lt;strong&gt;Preparing to Execute the Script&lt;/strong&gt;&lt;/em&gt;&lt;/h4&gt;
&lt;p&gt;The script is pretty straight forward, just need to define a few variables seen below and then you execute the script. I will walk you through the process.&lt;/p&gt;</description></item><item><title>Using CLI to Manage DVS Host Uplinks</title><link>https://davidstamen.com/2015/11/30/using-cli-to-manage-dvs-host-uplinks/</link><pubDate>Mon, 30 Nov 2015 00:00:00 +0000</pubDate><guid>https://davidstamen.com/2015/11/30/using-cli-to-manage-dvs-host-uplinks/</guid><description>&lt;p&gt;Ever needed to modify a DVS uplink configuration from ESXi Shell? I am currently troubleshooting some issues with DVS uplinks no longer being assigned on reboot.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&lt;strong&gt;As a heads up. If you are doing this on ESXi 6.0.. don&amp;rsquo;t. It can cause an issue with the proxy DVS having different ID than the actual DVS causing my original issue, still working with VMware Support to find out more details.&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;After &amp;ldquo;Restoring Network Configuration&amp;rdquo; a few too many times, I finally realized I could just add the uplinks back via CLI until support can figure out why this is occurring, here are the details on how to manage the uplinks on a DVS via CLI.&lt;/p&gt;</description></item><item><title>Configuring Multiple UCS VLAN's</title><link>https://davidstamen.com/2015/11/23/configuring-multiple-ucs-vlans/</link><pubDate>Mon, 23 Nov 2015 00:00:00 +0000</pubDate><guid>https://davidstamen.com/2015/11/23/configuring-multiple-ucs-vlans/</guid><description>&lt;p&gt;We are currently working on some Cisco ACI Integration and wanted to add a large VLAN Pool to a UCS Configuration.&lt;/p&gt;
&lt;p&gt;Since currently Cisco UCS does not allow selecting multiple VLAN&amp;rsquo;s easily when adding to a VLAN Group or vNIC Template, we now have a pretty decent script that will do it for you.&lt;/p&gt;
&lt;p&gt;The script can be found &lt;a href="https://github.com/dstamen/UCS-PowerTool/blob/master/ConfigureVLANGroupAndvNICTemplate.ps1"&gt;here.&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span class="line"&gt;&lt;span class="ln"&gt; 1&lt;/span&gt;&lt;span class="cl"&gt;# PowerCLI Script for adding VLAN to VLAN Group and vNIC Template
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="ln"&gt; 2&lt;/span&gt;&lt;span class="cl"&gt;# @davidstamen
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="ln"&gt; 3&lt;/span&gt;&lt;span class="cl"&gt;# http://davidstamen.com
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="ln"&gt; 4&lt;/span&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="ln"&gt; 5&lt;/span&gt;&lt;span class="cl"&gt;#Define Variables
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="ln"&gt; 6&lt;/span&gt;&lt;span class="cl"&gt;$cred = Get-Credential
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="ln"&gt; 7&lt;/span&gt;&lt;span class="cl"&gt;$ucs = &amp;#34;ucs01&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="ln"&gt; 8&lt;/span&gt;&lt;span class="cl"&gt;$startvlan = &amp;#34;100&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="ln"&gt; 9&lt;/span&gt;&lt;span class="cl"&gt;$endvlan = &amp;#34;150&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="ln"&gt;10&lt;/span&gt;&lt;span class="cl"&gt;$vnictemplate = &amp;#34;vnic-template&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="ln"&gt;11&lt;/span&gt;&lt;span class="cl"&gt;$vlangroup = &amp;#34;vlan-group&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="ln"&gt;12&lt;/span&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="ln"&gt;13&lt;/span&gt;&lt;span class="cl"&gt;#Connect to UCS
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="ln"&gt;14&lt;/span&gt;&lt;span class="cl"&gt;Connect-UCS $ucs -credential $cred
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="ln"&gt;15&lt;/span&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="ln"&gt;16&lt;/span&gt;&lt;span class="cl"&gt;#Assumes VLAN Name is the VLANID. Adds VLAN from start to end to vlan group
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="ln"&gt;17&lt;/span&gt;&lt;span class="cl"&gt;for($i=$startvlan;$i -le $endvlan;$i++){Get-UcsFabricNetGroup -Name $vlangroup |Add-UcsFabricPooledVlan -Name &amp;#34;$i&amp;#34;}
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="ln"&gt;18&lt;/span&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="ln"&gt;19&lt;/span&gt;&lt;span class="cl"&gt;#Assumes VLAN Name is the VLANID. Adds VLAN from start to end to vnic template
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="ln"&gt;20&lt;/span&gt;&lt;span class="cl"&gt;for($i=$startvlan;$i -le $endvlan;$i++){Get-UcsVnicTemplate -Name $vnictemplate | Add-UcsVnicInterface -ModifyPresent -DefaultNet false -Name &amp;#34;$i&amp;#34;}
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="ln"&gt;21&lt;/span&gt;&lt;span class="cl"&gt;Disconnect-UCS
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;You now are done! In my case I had to add 500 VLAN&amp;rsquo;s, so this script saved me quite a bit of time.&lt;/p&gt;</description></item><item><title>Disconnected vNIC's?</title><link>https://davidstamen.com/2015/11/18/disconnected-vnics/</link><pubDate>Wed, 18 Nov 2015 00:00:00 +0000</pubDate><guid>https://davidstamen.com/2015/11/18/disconnected-vnics/</guid><description>&lt;p&gt;Ever wonder why a VM isn&amp;rsquo;t on the network?&lt;/p&gt;
&lt;p&gt;I was working on deploying some test VM&amp;rsquo;s and for some reason all the VM&amp;rsquo;s that were cloned decided to start with the network disconnected, and the connect on power on was also not selected.&lt;/p&gt;
&lt;p&gt;I decided to throw together this quick one-liner that will make sure every VM is set to start connected on power on and is currently connected.&lt;/p&gt;</description></item><item><title>HA Error: Network Redundancy</title><link>https://davidstamen.com/2014/05/08/ha-error-network-redundancy/</link><pubDate>Thu, 08 May 2014 00:00:00 +0000</pubDate><guid>https://davidstamen.com/2014/05/08/ha-error-network-redundancy/</guid><description>&lt;p&gt;When setting up a cluster for testing you may not have 2 nics to use for management. to bypass the warning you can configure HA to not alert you for this issue.&lt;/p&gt;
&lt;h2 id="to-perform-the-steps-in-the-c-client"&gt;To perform the steps in the c# client.&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;From the VMware Infrastructure Client, right-click on the cluster and click &lt;strong&gt;Edit Settings&lt;/strong&gt;.&lt;/li&gt;
&lt;li&gt;Select &lt;strong&gt;vSphere HA&lt;/strong&gt; and click &lt;strong&gt;Advanced Options&lt;/strong&gt;.&lt;/li&gt;
&lt;li&gt;In the Options column, enter &lt;strong&gt;das.ignoreRedundantNetWarning&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;In the Value column, type &lt;strong&gt;true&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Click &lt;strong&gt;OK&lt;/strong&gt;.&lt;/li&gt;
&lt;li&gt;Right-click the host and click &lt;strong&gt;Reconfigure for vSphere HA&lt;/strong&gt;. This reconfigures HA.&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="to-perform-the-steps-in-the-webclient"&gt;To perform the steps in the webclient.&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;From the vSphere Web Client, right click on the cluster.&lt;/li&gt;
&lt;li&gt;Click on the &lt;b style="font-style: inherit;"&gt;Manage&lt;/b&gt; tab for the cluster, then under Settings click &lt;b style="font-style: inherit;"&gt;vSphere HA&lt;/b&gt;.&lt;/li&gt;
&lt;li&gt;Click on the &lt;b style="font-style: inherit;"&gt;Edit&lt;/b&gt; button in the top right corner.&lt;/li&gt;
&lt;li&gt;Expand the &lt;b style="font-style: inherit;"&gt;Advanced Options&lt;/b&gt; section, and click &lt;b style="font-style: inherit;"&gt;Add&lt;/b&gt;.&lt;/li&gt;
&lt;li&gt;In the Options column, type &lt;strong&gt;das.ignoreRedundantNetWarning.&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;In the Value column, type &lt;strong&gt;true&lt;/strong&gt;.&lt;/li&gt;
&lt;li&gt;Click &lt;strong&gt;OK&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Right-click the host and click &lt;strong&gt;Reconfigure for vSphere HA&lt;/strong&gt;.&lt;/li&gt;
&lt;/ol&gt;</description></item><item><title>Nested ESXi and NFS</title><link>https://davidstamen.com/2014/04/29/nested-esxi-and-nfs/</link><pubDate>Tue, 29 Apr 2014 00:00:00 +0000</pubDate><guid>https://davidstamen.com/2014/04/29/nested-esxi-and-nfs/</guid><description>&lt;p&gt;I was working today on configuring NFS/Openfiler in my lab and came across an issue that my nested ESXi host&amp;rsquo;s couldn&amp;rsquo;t talk over the VSS (Standard Switch) I created. Upon further research when using nested ESXi you need to enable &amp;ldquo;Promiscuous Mode&amp;rdquo; on the VSS to allow the traffic to pass.&lt;/p&gt;</description></item></channel></rss>